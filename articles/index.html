<!doctype html>
<html>
<head>
  <meta charset=utf-8>
  <link rel=stylesheet href="../style.css">
  <title>Maxime Euzi√®re</title>
</head>
<body>
  <div class=menu>
    <div class=header>
      <h1>Maxime Euzi√®re</h1>
      Front-end experiments
      <br>
      HTML / CSS / JS
      <br>
      <br>
      <a href=index.html>Home</a>
      <a href="../articles" class=active>Articles</a>
      <a href="../techwatch">Tech watch</a>
      <a href="../projects">Projects / experiments</a>
      <a href="../talks">Talks</a>
      <a href="../golfing">JS Code golfing</a>
    </div>
    <div class=footer>¬© 2014 - <a href="cv/cv-en.html" target=_blank>CV</a></div>
  </div>
  <div class=body>
<div class=section id=js1k_2pgames>
	<h2>JS1k 2014 - 2P Games</h2>
	<h3>march 2014</h3>
  <p>Welcome again, to the making-of of <a href= target=_blank>2P Games classic</a> and <a href=//js1k.com/2014-dragons/demo/1933 target=_blank>2P Games ++</a>, my team projects for <a href=//js1k.com target=_blank>JS1k</a> 2014.
  <p>I've made these games with the awesome code golfer <b>Subzey</b>, who helped me in many code-golfing projects last year<br>(<a href=//github.com/xem/miniCodeEditor target=_blank>a JSfiddle clone</a>, <a href=//github.com/xem/chip8 target=_blank>a chip8 emulator</a>, <a href=//github.com/xem/paste target=_blank>a Pastebin clone</a>, <a href=//github.com/xem/JSciissors target=_blank>a JS packer</a>,  <a href=//gist.github.com/xem/7086007 target=_blank>a JS-to-unicode converter</a>, ...)
  <hr>
  <p><h3>Source code</h3>
  <p><b>Commented (5735b)</b>
  <br>
  <button onclick=commented2pg.style.display='block'>Show</button>
  <pre id=commented2pg class=code style=display:none>/** Globals **/
// a: init function
// b: body
// c, d, e: board size
// f: rules (0: reversi / 1: find 4 / 2: XnO / 3: XnO 3D)
// g: game state (0: game over / 1: playing)
// h: HTML
// i, j, k, l: loop vars
// m: model (array filled with -1/0/1)
// p: current player(1: O / -1: X)
// q: onclick

/** Specific vars for init function **/
// i: lines
// j: columns
// k: cell number

/** Specific vars for play function **/
// c,d,e: params

// XnO, XnO3D, Find 4
// r: sum of the marks that are needed to win

// Reversi:
// s: cell is playable (0: not playable / 1: playable)
// t: direction is playable
// u, v: loop vars
// w: score

/** Unicode space: "‚ÄÄ" **/


// Draw function (redraw everything after each move)
// c: reset (if == 0)
a=function(c,d,e){
  
  // Init cell number, HTML
  l=0;
  h="&lt;center>&lt;font face=arial>&lt;p>&lt;button onclick=m=[];f=2;a(p=g=s=1)>XnO&lt;button onclick=m=[];f=3;a(p=g=s=1)>XnO3D&lt;button onclick=m=[];f=1;a(p=g=s=1)>Find4&lt;button onclick=m=[];f=w=0;m[27]=m[36]=-1;m[28]=m[35]=1;a(p=g=s=1)>Flip&lt;/button>&lt;p>";
  
  // Show HTML and game status
  
  if(c){

    // Loop on tables, write table HTML
    for(i="1113"[f];i--;){
    
      h+="&lt;/table>&lt;p>&lt;table border>";
    
      // Loop on lines
      for(j="8633"[f];j--;)

        // Write line HTML, loop on cells
        for(h+="&lt;tr>",k="8733"[f];k--;)
        
          // Write cell HTML
          h+="&lt;th width=20 onclick=q("+[l,7-j,7-k]+") id=t"+l+">"+"X.O"[1+(m[l]=m[l++]||0)];
    }
  
    h+="&lt;/table>&lt;p>";
    
    // Board not full
    if(~m.indexOf(0)){
    
      h+=(
        g
        ?
          
        // Game not over: show next
        "XnO"[p+1]+" next&lt;p>"
        
        :
        
        // Game over (not reversi): show winner
        "XnO"[-p+1]+" won"
      )
      
      // Reversi
      if(!f){
      
        // Leader, pass button
        h+=(w?w>0?"O>X":"X>O":"O=X")+"&lt;p>&lt;button onclick=a(p=-p)>pass";
      }
    }
    
    // Board full
    else{

      h+=
      
      f
      
      ?
      
      // Not reversi: show winner or draw
      (g?"draw":"XnO"[-p+1]+" won")
      
      :
        
      // Reversi: show winner or draw
      (w?w>0?"O won":"X won":"draw")
    }
  }

  b.innerHTML=h;
}

a();

// onclick
// c: current cell number
// d: current cell's line
// e: current cell's column
q=function(c,d,e){
  
  // If the game is not over and the cell is empty
  if(g&&!m[c]){
  
    // XnO / XnO 3D
    if(f>1){
    
      // Put a mark
      // Update model, set total
      // Test victory
      for(i=3;i--;)
        for(j=3;j--;)
          if(
            k=i*9,
            l=j*3,
            ~[
              m[k+j]+m[k+j+3]+m[k+j+6], // Columns 2D
              m[k+l]+m[k+l+1]+m[k+l+2], // Lines 2D
              m[k+4]+m[k+0]+m[k+8], // Diagonals 2D
              m[k+4]+m[k+2]+m[k+6], // Diagonals 2D
              m[l+10]+m[l]+m[l+20], // Lines 3D
              m[l+10]+m[l+2]+m[l+18], // Lines 3D
              m[i+12]+m[i]+m[i+24], // Columns 3D
              m[i+12]+m[i+6]+m[i+18], // Columns 3D
              m[13]+m[0]+m[26], // Diagonals 3D
              m[13]+m[2]+m[24], // Diagonals 3D
              m[13]+m[6]+m[20], // Diagonals 3D
              m[13]+m[8]+m[18], // Diagonals 3D
              m[l+i]+m[l+i+9]+m[l+i+18] // Same cell in all tables
            ].indexOf((m[c]=p)*3)
          )
          g=0;
    }
    
    // Find 4
    if(f==1){
    
      // If a wrong cell is clicked, apply gravity
      for(;35>c&&!m[c+7];c+=7);

      // Test if 4 marks are aligned
      for(i=6;i--;)
        for(j=7;j--;)
          if(
            k=i*7+j,
            ~[
              j&lt;4&&m[k]+m[k+1]+m[k+2]+m[k+3], // Horizontally
              i&lt;3&&m[k]+m[k+7]+m[k+14]+m[k+21], // Vertically
              i&lt;3&&j&lt;4&&m[k]+m[k+8]+m[k+16]+m[k+24], // Diagonally 1
              i&lt;3&&j>2&&m[k]+m[k+6]+m[k+12]+m[k+18] // Diagonally 2
            ].indexOf((m[c]=p)*4)
          )
          g=0;
    }

    // Reversi
    if(!f){

      // Reset cell's playability
      s=0;

      // For each direction
      for(i=2;~i--;){
        for(j=2;~j--;){

          // Reset that direction's playability
          // If the neighbour is the opponent
          if(i|j&&(t=0,m[8*(d+i)+e+j]==-p)){

            // Loop on the next neighbours in that direction
            // If current color is found, stop, good direction
            // If an empty cell is found, stop, bad direction
            for(
              k=d+i,l=e+j;
              ~k&&k&lt;9&&~l&&l&lt;9&&(m[8*k+l]!=p||!(s=t=1))&&m[8*k+l];
              k+=i,l+=j
            );

            // If this direction is playable
            if(t){

              // Loop on the opposite neighbours
              for(
                u=d,v=e;
                u!=k||v!=l;
                u+=i,v+=j
              ){

                // Toggle them
                m[u*8+v]=p;
              }
            }
          }
        }
      }
      
      // Compute score
      w=0;
      for(i=64;i--;){
        w+=m[i];
      }
    }

    // Change player
    if(s)p=-p;
    
    // Redraw board
    a(1);
  }
}</pre>
  <p><b>Minified (1613b)</b>
  <br>
  <button onclick=minified2pg.style.display='block'>Show</button>
  <pre id=minified2pg class=code style=display:none>a=function(c,d,e){l=0;h="&lt;center>&lt;font face=arial>&lt;p>&lt;button onclick=m=[];f=2;a(p=g=s=1)>XnO&lt;button onclick=m=[];f=3;a(p=g=s=1)>XnO3D&lt;button onclick=m=[];f=1;a(p=g=s=1)>find4&lt;button onclick=m=[];f=w=0;m[27]=m[36]=-1;m[28]=m[35]=1;a(p=g=s=1)>flip&lt;/button>&lt;p>";if(c){for(i="1113"[f];i--;)for(h+="&lt;/table>&lt;p>&lt;table border>",j="8633"[f];j--;)for(h+="&lt;tr>",k="8733"[f];k--;)h+="&lt;th width=20 onclick=q("+[l,7-j,7-k]+") id=t"+l+">"+"X\xa0O"[1+(m[l]=m[l++]||0)];h+="&lt;/table>&lt;p>";~m.indexOf(0)?(h+=g?"XnO"[p+1]+" next&lt;p>": "XnO"[-p+1]+" won",f||(h+=(w?0&lt;w?"O>X":"X>O":"O=X")+"&lt;p>&lt;button onclick=a(p=-p)>pass")):h+=f?g?"draw":"XnO"[-p+1]+" won":w?0&lt;w?"O won":"X won":"draw"}b.innerHTML=h};a();q=function(c,d,e){if(g&&!m[c]){if(1&lt;f)for(i=3;i--;)for(j=3;j--;)if(k=9*i,l=3*j,~[m[k+j]+m[k+j+3]+m[k+j+6],m[k+l]+m[k+l+1]+m[k+l+2],m[k+4]+m[k+0]+m[k+8],m[k+4]+m[k+2]+m[k+6],m[l+10]+m[l]+m[l+20],m[l+10]+m[l+2]+m[l+18],m[i+12]+m[i]+m[i+24],m[i+12]+m[i+6]+m[i+18],m[13]+m[0]+m[26],m[13]+m[2]+m[24],m[13]+m[6]+m[20],m[13]+m[8]+m[18],m[l+i]+m[l+i+9]+m[l+i+18]].indexOf(3*(m[c]=p)))g=0;if(1==f){for(;35>c&&!m[c+7];c+=7);for(i=6;i--;)for(j=7;j--;)if(k=7*i+j,~[4>j&&m[k]+m[k+1]+m[k+2]+m[k+3],3>i&&m[k]+m[k+7]+m[k+14]+m[k+21],3>i&&4>j&&m[k]+m[k+8]+m[k+16]+m[k+24],3>i&&2&lt;j&&m[k]+m[k+6]+m[k+12]+m[k+18]].indexOf(4*(m[c]=p)))g=0}if(!f){s=0;for(i=2;~i--;)for(j=2;~j--;)if(i|j&&(t=0,m[8*(d+i)+e+j]==-p)){k=d+i;for(l=e+j;~k&&9>k&&~l&&9>l&&(m[8*k+l]!=p||!(s=t=1))&&m[8*k+l];k+=i,l+=j);if(t)for(u=d,v=e;u!=k||v!=l;u+=i,v+=j)m[8*u+v]=p}w=0;for(i=64;i--;)w+=m[i]}s&&(p=-p);a(1)}}</pre>
  <p><b>Packed (1024b)</b>
  <br>
  <button onclick=packed2pg.style.display='block'>Show</button>
  <pre id=packed2pg class=code style=display:none>for(_='+=Z];YonWhZVV"<U;a(S.indexOf(R18]]RQi+PL[K],KJ]+KIJP12IGl+FJF10IEtableC){Bif(A--;)@;H@Ak="draw"p+1]+"K8*XnO=0;=-p)k+]=w?0<w?"Ofor(i=<p>&&IHKki@H= wW"J13I],3>i3"[fY	buttW*(Kcp)))D=0U/C> Wclick==functiW(c,d,eB""[-Sp=D=s=1)><L=[Yf=alh="<center><fWt face=arial>233D1find4wK27K36-1;K28K351flip</>";AcB"111	i@<C border>",H="863	H@Utr>",k="873	k@Uth width=20M("+[l,7-H,7-k]+") id=t"+F">"+"X\\xa0O"[1+(KlKF+]||0)Y";~LR0)?(VD?""[ next": ,f||(V(>X":"X>O":"O=X")+"<a(p>pass")):Vf?D?:::"X:}b.innerHTML=h}S);MAD!Kc]BA1<f)3;39*i,l=3*H,~[KHH+3H+6JlF1F2J408J426ElIF20EF2IF18GiIP24GP6IP180I262I246I208I18JFiIFP9IFPQ3;A1==fB;35>c!Kc+7YcZ7);6;77*PH,~[4>123Kk714214>816242<612Q4}A!fBs2;~2;~H@Ai|H(t=0,(d+i)+e+HBk=d+i;l=e+H;~k9>k~l9>l(l]!=p||!(s=t=1))lY=i,F=H);At)u=d,T=e;u!=k||T!=l;uZi,TZH)u+Tp}w64;i@wZKi]}s(pS1)}}';g=/[^ -?DHLMOTX[-~]/.exec(_);)with(_.split(g))_=join(shift());eval(_)</pre>
  <hr>
  <p><h3>The idea</h3>
  <p>Subzey and I code-golfed <a href=//xem.github.io/MiniSweeper/ target=_blank>a minesweeper game in 480b</a> in 2013 and it was really fun and very instructive.
  <p>So, for JS1k 2014, I gave ourselves a big challenge: to fit as many 2-player games as possible in 1kb. Who knows, we could maybe fit three, four, five simple games in 1k...?
  <p>People have already made awesome 2-player games for JS1k (<a href=//js1k.com/2014-dragons/demo/1720 target=_blank>1</a>, <a href=//js1k.com/2013-spring/demo/1319 target=_blank>2</a>, <a href=//js1k.com/2011-dysentery/demo/941 target=_blank>3</a>, <a href=//js1k.com/2011-dysentery/demo/947 target=_blank>4</a>, <a href=//js1k.com/2010-first/demo/679 target=_blank>5</a>, <a href=//js1k.com/2010-first/demo/430 target=_blank>6</a>, <a href=//js1k.com/2010-first/demo/41 target=_blank>7</a>, <a href=//js1k.com/2010-first/demo/23 target=_blank>8</a>, <a href=//js1k.com/2010-first/demo/430 target=_blank>9</a>), but we've never seen game compilations, and that's why I chose to try that. I chose five board games:   Tic-Tac-Toe, Tic-Tac-Toe 3D, Four in a row, Reversi and Checkers.
  <br>
  <br>
  Then, we tried to implement those games separately, in good old HTML and JS (the boards are made with tables, not drawn on the canvas):
  <img src=images/2pg1.png width=700>
  <br>
  We quickly (and sadly) abandoned the last two games (reversi and checkers) because the first three already needed more than 2kb.
  <br>
  We gathered those 3 games into one, and golfed them as much as possible, until the whole demo could fit in 1kb. This process included reducing the graphics to the strict minimum (just tables, X and O's). It actually went under 750b, and from that point, we had to decide whether to enhance the graphics or add a fourth game. We decided to make 4 games in one (because that would be impressive), and make a 2k version with great graphics.
  <br>
  Besides the graphics, almost all our efforts have been made on the 1k version and its 4 games. Actually, we golfed that demo on three levels!
  <br>
  <hr>
  <p><b>1st level of golf: JS optimisation</b>
  <p>The first goal is indeed to have the shortest JS code possible.<br>
  A lot of effort has been made to fit the menu + the four playable games in 1613b.
  <p>The games needed a lot of variables, and we had to introduce 23 global vars. Almost all the alphabet, and most of them are heavily reused.
  <p>To save bytes and avoid any kind of DOM manipulation, all the elements on the screen are redrawn after each player's move.
  <p>Here's the program's structure:
  <pre class=code>// Draw function
a=function(c,d,e){
  
  // Init HTML (menu)
  // When a button of the menu is clicked, the game state is reset,
  // and the model m (an array representing the board) is initialized.
  h="&lt;center>&lt;font face=arial>&lt;p>&lt;button onclick=m=[];f=2;a(p=g=s=1)>XnO&lt;button onclick=m=[];f=3;a(p=g=s=1)>XnO3D&lt;button onclick=m=[];f=1;a(p=g=s=1)>Find4&lt;button onclick=m=[];f=w=0;m[27]=m[36]=-1;m[28]=m[35]=1;a(p=g=s=1)>Flip&lt;/button>&lt;p>";
  
  // If a game has been started
  if(c){

    // write table HTML (the board) according to the model
    // ... snip ...
    
    // Write informations under the board (current player, winner, ...)
    // ... snip ...

  }
  
  // Update page's &lt;body>
  b.innerHTML=h;
}

// Show the menu on load
a();

// Onclick (when a player clicks on the board to play)
q=function(c,d,e){
  
  // If the game is not over and the cell is empty
  if(g&&!m[c]){
  
    // Current player plays current game and updates the model
    // ... snip ...

    // Change player
    p=-p;
    
    // Redraw everything
    a(1);
  }
}</pre>
  <p>The board drawing snippet is very simple, and made of three loops. One for the boards, another one for the lines, and a last one for the cells of each line, depending on the model. "f" represents the current game (0: reversi / 1: find 4 / 2: XnO / 3: XnO 3D).
  <p>&lt;P>, &lt;TR> and &lt;TH> elements don't need to be closed.
  <p>&lt;TH> elements have the advantage of being bold and centered, but their borders are hidden when they are empty. That's why we use the blank character \xa0 in the empty cells. (i.e. the 0's in the model.)
  <pre class=code>// Loop on tables, write table HTML
for(i="1113"[f];i--;){

  h+="&lt;/table>&lt;p>&lt;table border>";

  // Loop on lines
  for(j="8633"[f];j--;)

    // Write line HTML, loop on cells
    for(h+="&lt;tr>",k="8733"[f];k--;)
    
      // Write cell HTML
      h+="&lt;th width=20 onclick=q("+[l,7-j,7-k]+") id=t"+l+">"+"X\xa0O"[1+(m[l]=m[l++]||0)];
}
h+="&lt;/table>&lt;p>";</pre>
<p>The rules of each game were reduced to their minimum after a lot of iterations. After each click, the game updates the model and checks for a victory:<p>
<p><b>Tic-Tac-Toe, Tic-Tac-Toe 3D:</b>
<pre class=code>for(i=3;i--;)
  for(j=3;j--;)
    if(
      k=i*9,
      l=j*3,

      // In the model, the players marks are represented as 1 and -1.
      // If 3 or -3 is found in this array representing all the possible alignments,
      // it means that a player has won.
      ~[
        m[k+j]+m[k+j+3]+m[k+j+6], // Columns 2D
        m[k+l]+m[k+l+1]+m[k+l+2], // Lines 2D
        m[k+4]+m[k+0]+m[k+8], // Diagonals 2D
        m[k+4]+m[k+2]+m[k+6], // Diagonals 2D
        m[l+10]+m[l]+m[l+20], // Lines 3D
        m[l+10]+m[l+2]+m[l+18], // Lines 3D
        m[i+12]+m[i]+m[i+24], // Columns 3D
        m[i+12]+m[i+6]+m[i+18], // Columns 3D
        m[13]+m[0]+m[26], // Diagonals 3D
        m[13]+m[2]+m[24], // Diagonals 3D
        m[13]+m[6]+m[20], // Diagonals 3D
        m[13]+m[8]+m[18], // Diagonals 3D
        m[l+i]+m[l+i+9]+m[l+i+18] // Same cell in all tables
      ].indexOf((m[c]=p)*3) // here, we update the model and test the alignments
    )
    g=0; // game over</pre>
<p><b>Find four:</b>
<pre class=code>// If a wrong cell is clicked, apply gravity
for(;35>c&&!m[c+7];c+=7);

// Test if 4 marks are aligned
for(i=6;i--;)
  for(j=7;j--;)
    if(
      k=i*7+j,
      ~[
        j&lt;4&&m[k]+m[k+1]+m[k+2]+m[k+3], // Horizontally
        i&lt;3&&m[k]+m[k+7]+m[k+14]+m[k+21], // Vertically
        i&lt;3&&j&lt;4&&m[k]+m[k+8]+m[k+16]+m[k+24], // Diagonally 1
        i&lt;3&&j>2&&m[k]+m[k+6]+m[k+12]+m[k+18] // Diagonally 2
      ].indexOf((m[c]=p)*4)
    )
    g=0;</pre>
<p><b>Reversi:</b>
<pre class=code>// Reset cell's playability
s=0;

// For each direction
for(i=2;~i--;){
  for(j=2;~j--;){

    // Reset that direction's playability
    // If the neighbour is the opponent
    if(i|j&&(t=0,m[8*(d+i)+e+j]==-p)){

      // Loop on the next neighbours in that direction
      // If current color is found, stop, good direction
      // If an empty cell is found, stop, bad direction
      for(
        k=d+i,l=e+j;
        ~k&&k&lt;9&&~l&&l&lt;9&&(m[8*k+l]!=p||!(s=t=1))&&m[8*k+l];
        k+=i,l+=j
      );

      // If this direction is playable
      if(t){

        // Loop on the opposite neighbours
        for(
          u=d,v=e;
          u!=k||v!=l;
          u+=i,v+=j
        ){

          // Toggle them
          m[u*8+v]=p;
        }
      }
    }
  }
}

// Compute score
w=0;
for(i=64;i--;){
  w+=m[i];
}</pre>
<p>After each move, all the screen is updated, including the board and the game status (leader, winner, draw, pass, etc...)<p>
<pre class=code>// Board not full
if(~m.indexOf(0)){

  h+=(
    g
    ?
      
    // Game not over: show next
    "XnO"[p+1]+" next&lt;p>"
    
    :
    
    // Game over (not reversi): show winner
    "XnO"[-p+1]+" won"
  )
  
  // Reversi
  if(!f){
  
    // Leader, pass button
    h+=(w?w>0?"O>X":"X>O":"O=X")+"&lt;p>&lt;button onclick=a(p=-p)>pass";
  }
}

// Board full
else{

  h+=
  
  f
  
  ?
  
  // Not reversi: show winner or draw
  (g?"draw":"XnO"[-p+1]+" won")
  
  :
    
  // Reversi: show winner or draw
  (w?w>0?"O won":"X won":"draw")
}</pre>
<p>All this code was minified with Google Closure Compiler and optimized manually.
<br>
<hr>
<p><b>2nd level of golf: RegPack optimization</b>
<p>The JS source could be much smaller than that, but when you deal with JS packers, the main rule is not to be short, it is to repeat yourself as much as possible. That's why many snippets of the code are arranged (and sometimes "unoptimized" to have a better result in a JS packer.
<br>
<hr>
<p><b>3rd level of golf: make the packed code smaller</b>
<p>During the development of this game, RegPack v3 was being developed by Siorki. Subzey and I used this tool up to its limits and helped the author improving it via Github. We also tweaked the regexp in the final result to lose a few extra bytes and fit the whole thing in 1k!
<pre class=code>for(_='/** snip **/';g=/[^ -?DHLMOTX[-~]/.exec(_);)with(_.split(g))_=join(shift());eval(_)</pre>
<br>
<hr>
<p><b>The 2K version</b>
<p>The only change in the "++" version is high-quality graphics. Here, the boards and the players marks can get the right shape, colors, borders, texts, which enhances the gaming experience a lot. Here's the code that changed in the "redraw" function:
<pre class=code>// Reversi
if(f==0){

  h+="&lt;table border>";
  for(j=8;j--;){
    h+="&lt;tr>";
    for(k=8;k--;){
      h+="&lt;th width=20 onclick=q("+[l,7-j,7-k]+") id=t"+l+" bgcolor=#5b5>"+["&lt;table bgcolor=0 width=20 height=20 class=i>&lt;/table>","\xa0","&lt;table bgcolor=#fff width=20 height=20 class=i>&lt;/table>"][1+(m[l]=m[l++]||0)];
    }
  }
  h+="&lt;/table>&lt;br>";

}

// 4 in a row
if(f==1){
  h+="&lt;table cellspacing=5 bgcolor=#aad>";
  for(j=6;j--;){
    h+="&lt;tr>";
    for(k=7;k--;){
      h+="&lt;th width=20 onclick=onclick=q("+[l,7-j,7-k]+") bgcolor=#fff style='border-radius:50%;overflow:hidden'>"+["&lt;table bgcolor=red width=20 height=20 class=i>&lt;/table>","\xa0","&lt;table bgcolor=yellow width=20 height=20 class=i>&lt;/table>"][1+(m[l]=m[l++]||0)];
    }
  }
  h+="&lt;/table>&lt;br>";
}

// Tic Tac Toe
if(f==2){
  h+="&lt;table style=border-collapse:collapse>";
  for(j=3;j--;){
    h+="&lt;tr>";
    for(k=3;k--;){
      h+="&lt;th width=20 onclick=q("+[l,7-j,7-k]+") style='"+(j?"border-bottom:2px solid;":"")+(k?"border-right:2px solid;":"")+"'>"+"X\xa0O"[1+(m[l]=m[l++]||0)];
    }
  }
  h+="&lt;/table>&lt;br>";
}

// Tic Tac Toe 3D
if(f==3){
  for(i=3;i--;){
    h+="&lt;table border style=margin-left:"+(4*(1-i))+"em>";
    for(j=3;j--;){
      h+="&lt;tr>";
      for(k=3;k--;){
        h+="&lt;th width=20 onclick=q("+[l,7-j,7-k]+")>"+"X\xa0O"[1+(m[l]=m[l++]||0)];
      }
    }
    h+="&lt;/table>&lt;br>";
  }
}

// Board not full
if(~m.indexOf(0)){

  h+=(
    g
    ?
      
    // Game not over: show next
    "Next player: &lt;b>"+
    [
      ["&lt;table bgcolor=0 width=20 height=20 class=i>&lt;/table>","\xa0","&lt;table bgcolor=#fff width=20 height=20 class=i>&lt;/table>"],
      ["&lt;table bgcolor=red width=20 height=20 class=i>&lt;/table>","\xa0","&lt;table bgcolor=yellow width=20 height=20 class=i>&lt;/table>"],
      "X\xa0O",
      "X\xa0O"
    ][f][p+1]+"&lt;/b>"
    
    :
    
    // Game over (not reversi): show winner
    "&lt;b>"+[
      ["&lt;table bgcolor=0 width=20 height=20 class=i>&lt;/table>","\xa0","&lt;table bgcolor=#fff width=20 height=20 class=i>&lt;/table>"],
      ["&lt;table bgcolor=red width=20 height=20 class=i>&lt;/table>","\xa0","&lt;table bgcolor=yellow width=20 height=20 class=i>&lt;/table>"],
      "X\xa0O",
      "X\xa0O"
    ][f][-p+1]+"&lt;/b> won!"
  )
  
  // Reversi
  if(!f){
  
    // Leader, pass button
    h+="&lt;p>&lt;button onclick=a(p=-p)>Pass";
  }
}

// Board full
else{

  h+=
  
  f
  
  ?
  
  // Not reversi: show winner or draw
  (g?"draw":
  [
    ["&lt;table bgcolor=0 width=20 height=20 class=i>&lt;/table>","\xa0","&lt;table bgcolor=#fff width=20 height=20 class=i>&lt;/table>"],
    ["&lt;table bgcolor=red width=20 height=20 class=i>&lt;/table>","\xa0","&lt;table bgcolor=yellow width=20 height=20 class=i>&lt;/table>"],
    "X\xa0O",
    "X\xa0O"
  ][f][-p+1]
  +" won!")
  
  :
    
  // Reversi: show winner or draw
  (w?w>0?"&lt;table bgcolor=#fff width=20 height=20 class=i>&lt;/table> won!":"&lt;table bgcolor=0 width=20 height=20 class=i>&lt;/table> won!":"Draw!")
}</pre>
<p>That's all folks! See ya!
<p>Maxime and Anton
</div>

<div class=section id=js1k_floppydragon>
	<h2>JS1k 2014 - Floppy Dragon</h2>
	<h3>febuary 2014</h3>
  <p>Welcome to the making-of of <a href=//js1k.com/2014-dragons/demo/1704 target=_blank>Floppy Dragon</a>, my individual entry for <a href=//js1k.com target=_blank>JS1k</a> 2014.
  <p>In febuary 2014, all the Internet was talking about the game Flappy Bird, so I decided (for fun) to make a mini-game inspired by that, but featuring a dragon instead of a bird, and stalactites in a cave instead of pipes. I also wanted to introduce many cool details such as responsive display, nice animated graphics, random maps, increasing speed and difficulty, textual interface, etc. And, of course, it had to fit in 1k of JavaScript.
  <hr>
  <p><h3>Source code</h3>
  <p><b>Commented (2876b)</b>
  <br>
  <button onclick=commentedfd.style.display='block'>Show</button>
  <pre id=commentedfd class=code style=display:none>// Variables
// a: the canvas
// b: the body
// c: the canvas's 2d context
// d: (reused) game has started (0/1)
// e: game has ended (0/1)
// f: score
// g: the random map
// h: dragon's vertical speed
// i, j: dragon's coordinates x, y
// k: steps already passed (1 step = 20px)
// l: the game's framerate
// n: the game's loop function
// o: loop var
// p: dragon's drawing path
// v, w, y, z: temp vars

// Initialization
// Scale the scene as if it was 1000px high
c.scale(a.height/1E3,a.height/1E3);

// Reset
d=e=f=h=0;
g=[];
for(o=0;o<1E3;o++)
  g[o]=g[o+1E3]=8*Math.random()|1-1;
i=j=300;
k=20;
l=50;
g[20]=0;
g[40]=1;
g[60]=2;
g[80]=3;
g[100]=4;
g[110]=5;
g[120]=6;
g[140]=7;

// Controls (click / tap / press any key)
ontouchstart=onmousedown=onkeydown=function(){
  
  // If game is over, reset
  if(e){
    d=e=f=h=0;
    g=[];
    for(o=0;o<1E3;o++)
      g[o]=g[o+1E3]=8*Math.random()|1-1;
    i=j=300;
    k=20;
    l=50;
  }
  
  // If game is not over, start the game if it's not started, and jump
  else{
    h=45;
    d=1;
  }
};

// Game loop
(n=function(){

  // Background
  c.fillStyle="#E50";
  c.fillRect(0,0,4E4,4E4);
  
  // Walls
  c.fillStyle="#920";
  
  // Roof
  c.beginPath();
  c.moveTo(-k,0);
  for(o=2E3;o--;)
    o%20
    ?
    c.lineTo(40*o-k,20+4*g[o])
    :
    (c.lineTo(40*o-k,100*g[o]),c.lineTo(40*o-k-4,100*g[o]));
  c.lineTo(40*o-k,0);
  c.fill();
  
  // Ceiling
  c.beginPath();
  c.moveTo(-k,2E3);
  for(o=2E3;o--;)
    o%20
    ?
    c.lineTo(40*o-k,980-4*g[o])
    :
    (c.lineTo(40*o-k,100*(g[o]+3)),c.lineTo(40*o-k-4,100*(g[o]+3)));
  c.lineTo(40*o-k,1E3);
  c.fill();
  
  // Dragon
  p="fEFf&{{~_=,;=vviJ.jfVi/.OoyizyhkhEwf74)\n$fwwuvtU`"+(10<h?"iZ[*)yj:*im**y|Ktdww54#5Dy\iz[Kzi[Jiijk[e@1!":"zl]LfU{\lKtBUh{zzU66iigig5\n&iiyz{vfwwiyDfwiiE");
  c.fillStyle="#000";
  c.beginPath();
  c.moveTo(v=i-e,w=(j-=h)-e);
  for(o in p){
    y=8-2*(p.charCodeAt(o)>>4);
    z=16-2*(p.charCodeAt(o)&15);
    c.lineTo(v+=(e?y:z),w+=(e?-z:y));
  }
  c.fill();
  
  // Apply gravity if the game has started
  d&&(h-=6);
  
  // Loop on the map if we are far enough
  d&&!e&&(k+=20,4E4<k&&(k-=4E4));
  
  // Increase score and game speed after each obstacle
  !d||e||(k+280)%800||(f++,20<l&&l--);
  
  // Game over
  if(50>j||950<j||!((k+300)%800)&&(j<100*g[20*~~(k/800)+20]+50||j>100*g[20*~~(k/800)+20]+250))
    e=40;
  
  // Text
  c.fillStyle="#fff";
  c.font="6em Arial";
  d&&c.fillText(f,a.width/(a.height/1E3)/2-30*1,500);
  d||c.fillText("#FloppyDragon",a.width/(a.height/1E3)/2-30*11,500);
  e&&c.fillText("score",a.width/(a.height/1E3)/2-30*4,400);
  c.fillText(e?"restart":!d?"start":"",a.width/(a.height/1E3)/2-30*5,600);
  
  // Loop
  setTimeout(n,l)
})()</pre>
  <p><b>Minified (1507b)</b>
  <br>
  <button onclick=minifiedfd.style.display='block'>Show</button>
  <pre id=minifiedfd class=code style=display:none>c.scale(a.height/1E3,a.height/1E3);d=e=f=h=0;g=[];for(o=0;1E3>o;o++)g[o]=g[o+1E3]=8*Math.random()|0;i=j=300;k=20;l=50;ontouchstart=onmousedown=onkeydown=function(){if(e){d=e=f=h=0;g=[];for(o=0;1E3>o;o++)g[o]=g[o+1E3]=8*Math.random()|0;i=j=300;k=20;l=50}else h=45,d=1};(n=function(){c.fillStyle="#E50";c.fillRect(0,0,4E4,4E4);c.fillStyle="#920";c.beginPath();c.moveTo(-k,0);for(o=2E3;o--;)o%20?c.lineTo(40*o-k,20+4*g[o]):(c.lineTo(40*o-k,100*g[o]),c.lineTo(40*o-k-4,100*g[o]));c.lineTo(40*o-k,0);c.fill();c.beginPath();c.moveTo(-k,2E3);for(o=2E3;o--;)o%20?c.lineTo(40*o-k,980-4*g[o]):(c.lineTo(40*o-k,100*(g[o]+3)),c.lineTo(40*o-k-4,100*(g[o]+3)));c.lineTo(40*o-k,1E3);c.fill();p="fEFf&{{~_=,;=vviJ.jfVi/.OoyizyhkhEwf74)\n$fwwuvtU`"+(10<h?"iZ[*)yj:*im**y|Ktdww54#5Dy\iz[Kzi[Jiijk[e@1!":"zl]LfU{\lKtBUh{zzU66iigig5\n&iiyz{vfwwiyDfwiiE");c.fillStyle="#000";c.beginPath();c.moveTo(v=i-e,w=(j-=h)-e);for(o in p)y=8-2*(p.charCodeAt(o)>>4),z=16-2*(p.charCodeAt(o)&15),c.lineTo(v+=e?y:z,w+=e?-z:y);c.fill();d&&(h-=6);d&&!e&&(k+=20,4E4<k&&(k-=4E4));!d||e||(k+280)%800||(f++,20<l&&l--);if(50>j||950<j||!((k+300)%800)&&(j<100*g[20*~~(k/800)+20]+50||j>100*g[20*~~(k/800)+20]+250))e=40;c.fillStyle="#fff";c.font="6em Arial";d&&c.fillText(f,a.width/(a.height/1E3)/2-30,500);d||c.fillText("#FloppyDragon",a.width/(a.height/1E3)/2-330,500);e&&c.fillText("score",a.width/(a.height/1E3)/2-120,400);c.fillText(e?"restart":d?"":"start",a.width/(a.height/1E3)/2-150,600);setTimeout(n,l)})()</pre>
  <p><b>Packed (1024b)</b>
  <br>
  <button onclick=packedfd.style.display='block'>Show</button>
  <pre id=packedfd class=code style=display:none>_='c.scale(,	;ontouchH=onmousedown=onkeydowif(e){	}else h=45,d=1};(Eq";Rect(0,0,^,^9Q"-k,0Q+N),0()-k,2E3980-(+3)N(+3)),Y(p="fEFf&{{~_=,;=vviJ.jfVi/.OoyizyhkhEwf74)\\n$fwwuvtU`"+(10<h?"iZ[*)yj:*im**y|Ktdww54#5Dy\\iz[Kzi[Jiijk[e@1!":"zl]LfU{\\lKtBUh{zzU66iigig5\\n&iiyz{vfwwiyDfwiiE"0"v=i-e,w=(j-=h)-eG in p)y=8>>4),z=16&15),Iv+=e?y:z,w+=e?-z:y(dW(h-=6dW!eW(k+=Q,^<kW(k-=^)!dXeX(k+280)%8X(f++,Q<lWl--if(q>jX9q<jX!((k+3)%8)W(j<qXj>2q))e=40;fff";c.font="6em Arial";dWf1,5dX"#FloppyDragon"11,5eW"score"4,4e?"reH":d?"":"H"5,6setTimeout(n,l)})()I40*o-k,a.width/()/2-30*	d=e=f=h=0;g=[];G=0;Y>o;o++)=g[o+Y]=8*Math.random()|0;i=j=3;k=Q;l=qc.fill;c.beginPath(c.moveTo(Style="#G=2E3;o--;)o%Q?,a.height/Y1*g[Q*~~(k/8)+Q]+);g[o]-2*(p.charCodeAt(o)Text(00n=function(){4*):(,1*Gfor(oHstartIc.lineTo(N),-4,1*Q20W&&X||Y1E3^4E4q50';for(Y in $='q^YXWQNIHG	')with(_.split($[Y]))_=join(pop());eval(_)</pre>
  <hr>
  <p><h3>Responsive display</h3>
  <img src=images/fd1.png width=700>
  <p>In JS1k entries, <b>a</b> represents a fullscreen canvas, and <b>c</b> represents the 2D context of this canvas. On load, the canvas' width and height are automatically set to the innerWidth and innerHeight of the window. There are many ways to draw into this canvas, but I chose the following approach:<br>
  First, I scale the canvas' context with this ratio:
  <pre class=code>c.scale(a.height/1E3,a.height/1E3);</pre>
  Then, the game just has to draw on the canvas' context as if it was 1000px high and infinitely long, and the drawing will spread on all the screen.
  <p>For the orange background, I simply draw a huge rectangle on the canvas when I start rendering each frame:
  <pre class=code>// Background
c.fillStyle="#E50";
c.fillRect(0,0,4E4,4E4);</pre>
  <hr>
  <p><h3>Random map</h3>
  <img src=images/fd2.png width=700>
  <p>In the source code of Floppy Dragon, there's a little piece of code that initializes the game. This code is executed on load, but also when the player loses and decides to try again. In this snippet, I generate an array <b>g</b> with 1000 random integers between 0 and 7, stored from index 0 and index 1000:
  <pre class=code>g=[];
for(o=0;o<1E3;o++)
  g[o]=g[o+1E3]=8*Math.random()|1-1;</pre>
  <p>In the game loop, this array is used as a heightmap to draw the upper and lower walls of the cave, and the obstacles:<br>
  A new "step" is drawn every 40px to make the walls look less flat, and an obstacle is drawn every 20 steps. All these points depend on the heightmap values. The obstacles use these values x 100.
  <p>To sum up, the walls are just two big polygons that are drawn with a very similar code, the only difference is that they are mirrored and show the obstacles in a complementary way (a 300px gap is kept between each pair of stalactites)
  In the following code, k represents the horizontal offset of the scene. This rendering is performed at each frame.
  <pre class=code>// Draw the walls
c.fillStyle="#920";

// Roof
c.beginPath();
c.moveTo(-k,0);
for(o=2E3;o--;)
  o%20
  ?
  // Wall
  c.lineTo(40*o-k,20+4*g[o])
  :
  // Obstacle
  (c.lineTo(40*o-k,100*g[o]),c.lineTo(40*o-k-4,100*g[o]));
c.lineTo(40*o-k,0);
c.fill();

// Ceiling
c.beginPath();
c.moveTo(-k,2E3);
for(o=2E3;o--;)
  o%20
  ?
  // Wall 
  c.lineTo(40*o-k,980-4*g[o])
  :
  // Obstacle
  (c.lineTo(40*o-k,100*(g[o]+3)),c.lineTo(40*o-k-4,100*(g[o]+3)));
c.lineTo(40*o-k,1E3);
c.fill();</pre>
  <p>The maps repeats itself every 1000 steps, thanks to this code that goes 4000px back as soon as the game scrolls more than 4000px:
  <pre>// Loop on the map if we are far enough
  d&&!e&&(k+=20,4E4&lt;k&&(k-=4E4));</pre>
  <hr>
  <p><h3>User interface</h3>
  <p>The user interface is made of different texts showing the game name, the score, and a start / restart message. These texts are centered and scaled. In the following code, <b>d</b> is set if the game is started, <b>f</b> is the score, and <b>e</b> is set if the game is over.
  <pre class=code>// Text
  c.fillStyle="#fff";
  c.font="6em Arial";
  d&&c.fillText(f,a.width/(a.height/1E3)/2-30*1,500);
  d||c.fillText("#FloppyDragon",a.width/(a.height/1E3)/2-30*11,500);
  e&&c.fillText("score",a.width/(a.height/1E3)/2-30*4,400);
  c.fillText(e?"restart":!d?"start":"",a.width/(a.height/1E3)/2-30*5,600);</pre>
  <p>User interface also means controls, and the controls are simple: press any key or click or tap to start, flap, or restart. When those events are fired, the "reset sequence" is executed (if the game is over), or the dragon flaps (if the game is running, or starting). <b>h</b> represents the vertical speed of the dragon, <b>i</b> and <b>j</b> represent its coordinates, and <b>l</b> is the game's speed.
  <pre>// Controls
ontouchstart=onmousedown=onkeydown=function(){
  
  // If game is over, reset
  if(e){
    d=e=f=h=0;
    g=[];
    for(o=0;o<1E3;o++)
      g[o]=g[o+1E3]=8*Math.random()|1-1;
    i=j=300;
    k=20;
    l=50;
  }
  
  // If game is not over, start the game if it's not started, and jump
  else{
    h=45;
    d=1;
  }
};</pre>
  <p>Talking about framerate, as I explained earlier, the game's speed is increasing. A variable (<b>l</b>) holds the number of milliseconds between each frame. It starts at 50 and is decremented after each obstacle passed, with a lower limit of 20. The rendering function is called recursively with the corresponding timeout:
  <pre class=code>// Game loop
(n=function(){

  // ... snip ...
  
  // Increase score and game speed after each obstacle
  !d||e||(k+280)%800||(f++,20&lt;l&&l--);
  
  // ... snip ...
  
  // Loop
  setTimeout(n,l)
})()</pre>
  <p>At each frame, we also apply gravity (i.e. increment the vertical coordinate of the dragon)
  <pre class=code>// Apply gravity if the game has started
d&&(h-=6);</pre>
  <p>Finally, we have to detect when the game is lost (when the dragon's head hits the floor or the ceiling or an obstacle. Here's how it is done:
  <pre class=code>// Game over
if(50>j||950<j||!((k+300)%800)&&(j<100*g[20*~~(k/800)+20]+50||j>100*g[20*~~(k/800)+20]+250))
  e=1;</pre>
  <hr>
  <p><h3>Draw the dragon</h3>
  <p>Last but not least, when all the game mechanics are ready, and the code is minified and packed, I have only 360 bytes left to draw the hero of the game: the dragon.
  I thought I could simply use a unicode character such as <a href=//www.fileformat.info/info/unicode/char/1f409/index.htm target=_blank>U+1F409</a> or <a href=//www.fileformat.info/info/unicode/char/1f432/index.htm target=_blank>U+1F432</a>. But these models are not very good-looking, and they aren't displayed correctly on all browsers.
  <p>I could also use pixel art (<a href=//js1k.com/2014-dragons/demo/1659 target=_blank>like this</a>) or bezier curves (<a href=//js1k.com/2014-dragons/demo/1648 target=_blank>like that</a>) but this would have used too many characters to draw what I had in mind.
  <p>So I decided to draw a shape made of tiny lines, and compress it with a home-made technique:
  <img src=images/fd3.png>
  <p>The shape starts at the neck of the dragon. Each point of the shape has coordinates very close to the previous point. My goal was to store the X and Y coordinates of each point in an unique ASCII character. So I stored the X offset in the first 3 bits of each character (range: -4 to +4), and the Y offset in the last 4 bits (range: -8 to +8).
  <p>As a result, I was able to represent the dragon's body plus the two different wings shapes in just 196 characters (most of these are invisible).
  <pre class=code>p="fEFf&{{~_=,;=vviJ.jfVi/.OoyizyhkhEwf74)\n$fwwuvtU`"+(10&lt;h?"iZ[*)yj:*im**y|Ktdww54#5Dy\iz[Kzi[Jiijk[e@1!":"zl]LfU{\lKtBUh{zzU66iigig5\n&iiyz{vfwwiyDfwiiE");</pre>
  <p>And here is the code that draws the full shape at the good coordinates. Note that the coordinates are inverted when the dragon dies, in order to draw the falling animation.
  <pre class=code>
  c.fillStyle="#000";
  c.beginPath();
  c.moveTo(v=i,w=(j-=h));
  for(o in p){
    y=8-2*(p.charCodeAt(o)>>4);
    z=16-2*(p.charCodeAt(o)&15);
    c.lineTo(v+=(e?y:z),w+=(e?-z:y));
  }
  c.fill();</pre>
  <br>
  <hr>
  <p>To finish, a few final optimizations and JScrush helped me fit this game in 1024 bytes, and I submitted it two weeks after the beginning of the contest. It had the honor to be mentioned <a href=//twitter.com/js1k/status/433406361087401984 target=_blank>here</a> and <a href=//qfox.nl/weblog/312 target=_blank>here</a> by Peter van der Zee, who organizes JS1k every year.
  <p>Cheers,<br>
  Maxime
  <br>
  <br>
</div>
<div class=section id=implicitgetelementbyid_en>
	<h2>Implicit getElementById's</h2>
	<h3>october 2013</h3>
	<div id=getelementbyid>
		<p>What is the most useful JavaScript function, but also the most annoying to write? <b>document.getElementById()</b>, of course! It is so useful, and so long, that every decent JS library contains an alias for to call it easily (generally <b>$()</b>).</p>
    <p>But did you know that we often don't even need to call it? Indeed, all the browsers in use today (including IE6+) allow to access to an HTML element by using directly its <b>id</b> as a global var! It's a non-standard feature, yet it works very well everywhere.</p>
    <pre>&lt;div id="myId">&lt;/div>
&lt;script>
  alert(myId);                            // --> [object HTMLDivElement]
  alert(myId.id);                         // --> "myId"
  alert(window.myId.id);                  // --> "myId"
  alert(this.myId.id);                    // --> "myId"
  alert(self.myId.id);                    // --> "myId"
  alert('myId' in window);                // --> true
  alert(window.hasOwnProperty("myId"));   // --> true
&lt;/script></pre>
    <p>So "myId" is a property of window, but it's not "enumerable", so we can't see it by ny making a loop or a console.dir() on the window object:</p>
    <pre>
// Display the content of window:
console.dir(window);                      // myId is not pr√©sent.

// Loop through the properties of window:
var present = false;
for(var i in window){
  if(i == 'myId'){
    present = true;
  }
}
alert(present);                           // --> false
    </pre>
    <p>I experimented with this "feature" and found some funny things:</p>
    <p><b>An implicit id can't have the same name as a protected JS keyword:</b></p>
    <pre>&lt;div id=function>&lt;/div>
&lt;script>alert(function) // SyntaxError: Unexpected token )&lt;/script></pre>
		<br>
    <p><b>An implicit getElementById can't overload a native global var, such as window.screen:</b></p>
    <pre>&lt;div id=screen><&lt;/div>

&lt;script>
  screen.innerHTML = "screen";          // --> nothing happens
  alert(screen);                        // --> [object Screen]
&lt;/script></pre>
		<br>
    <p><b>Also, it can't redefine a global var defined earlier</b></p>
    <pre>&lt;script>
  global0 = 1;
&lt;/script>

&lt;div id=global0><&lt;/div>

&lt;script>
  global0.innerHTML = "global0";        // --> nothing happens
  alert(global0);                       // --> 1
&lt;/script></pre>
		<br>
    <p><b>A global var defined with the "window." prefix can overload an implicit getElementById</b></p>
    <pre>&lt;div id=global1>&lt;/div>

&lt;script>
  global1.innerHTML = "global1";        // --> the div contains the text "global1" 
  console.log(global1);                 // --> [object HTMLDivElement]
  window.global1 = 1;                   // Try to overload global1
  console.log(global1);                 // --> 1
&lt;/script></pre>
    <br>
    <p><b>If we try to overloas an implicit getElementById with a global var defined without any prefix, this is what happens:</b></p>
    <pre>&lt;div id=global2>&lt;/div>

&lt;script>
  global2.innerHTML = "global2";        // --> the div contains the text "global2" 
  try{global2 = 1}                      // Try to overload global2
  catch(e){alert(e)}                    // --> TypeError on IE < 9 / no error on other browsers
  console.log(global2);                 // --> [object HTMLDivElement] on IE < 9 / 1 on other browsers
&lt;/script></pre>
    <br>
    <p><b>Finally, if we try to overload an implicit getElementById with a global var defined with a "var", this is what happens:</b></p>
    <pre>&lt;div id=global3>&lt;/div>

&lt;script>
  global3.innerHTML = "global3";        // --> Uncaught TypeError: Cannot set property 'innerHTML' of undefined
  console.log(global3);                 // --> undefined
  var global3 = 1;                      // --> Try to overload global3
  console.log(global3);                 // --> 1
&lt;/script></pre>
    <br>
    <p>In this case, the keyword "var" on line 3 changes the order in which the JS code is parsed, and it breaks the lines 1 and 2.</p>
    <hr>
    <p>To conclude, this technique is useful in some particular cases where we don't want to use a heavy library nor call the long function <b>document.getElementById()</b>, especially in code golfing contests. But in real life, it's safer to use the good old native methods because the implicit <b>document.getElementById</b> comes with several traps, and can lead to hours of debugging...</p>
		<br>
		Cheers!
		<br>
		<b>@MaximeEuziere</b>
	</div>
</div>

<div class=section id=implicitgetelementbyid_fr style=display:none>
	<h2>Les "getElementById" implicites</h2>
	<h3>octobre 2013</h3>
	<div id=getelementbyid_fr>
		<p>Quelle fonction JavaScript est la plus utile, et la plus emb√™tante √† √©crire? <b>document.getElementById()</b>, bien s√ªr! C'est tellement utile, et tellement long que toute librairie JS digne de ce nom cr√©e un alias (g√©n√©ralement <b>$()</b>) pour pouvoir l'appeler facilement.</p>
    <p>Mais saviez-vous qu'on n'a, bien souvent, m√™me pas besoin de l'appeler? En effet, tous les navigateurs qu'on peut trouver en circulation aujourd'hui (y compris IE6+) permettent d'acc√©der √† un √©l√©ment HTML en utilisant directement son <b>id</b> comme une variable globale! C'est un fonctionnement compl√®tement non-standard, mais qui a le bon go√ªt de marcher partout, et extr√™mement bien.</p>
    <pre>&lt;div id="monId">&lt;/div>
&lt;script>
  alert(monId);                           // --> [object HTMLDivElement]
  alert(monId.id);                        // --> "monId"
  alert(window.monId.id);                 // --> "monId"
  alert(this.monId.id);                   // --> "monId"
  alert(self.monId.id);                   // --> "monId"
  alert('monId' in window);               // --> true
  alert(window.hasOwnProperty("monId"));  // --> true
&lt;/script></pre>
    <p>"monId" est bien une propri√©t√© window, mais il n'est pas √©num√©rable, autrement dit, on ne tombera pas dessus si on fait une boucle ou un console.dir():</p>
    <pre>
// On affiche le contenu de window:
console.dir(window);                      // monId n'est pas pr√©sent.

// On it√®re sur les propri√©t√©s de window:
var present = false;
for(var i in window){
  if(i == 'monId'){
    present = true;
  }
}
alert(present);                           // --> false
    </pre>
    <p>J'ai fait quelques exp√©riences avec cette "fonctionnalit√©", et j'ai d√©couvert des choses rigolotes:</p>
    <p><b>Un id implicite ne peut pas avoir le m√™me nom qu'un mot-cl√© JavaScript prot√©g√©</b></p>
    <pre>&lt;div id=function>&lt;/div>
&lt;script>alert(function) // SyntaxError: Unexpected token )&lt;/script></pre>
		<br>
    <p><b>Un getElementById implicite ne peut pas √©craser une variable globale native, par exemple window.screen:</b></p>
    <pre>&lt;div id=screen><&lt;/div>

&lt;script>
  screen.innerHTML = "screen";          // --> rien ne se passe
  alert(screen);                        // --> [object Screen]
&lt;/script></pre>
		<br>
    <p><b>Il ne peut pas non plus √©craser une variable globale d√©finie auparavant:</b></p>
    <pre>&lt;script>
  global0 = 1;
&lt;/script>

&lt;div id=global0><&lt;/div>

&lt;script>
  global0.innerHTML = "global0";        // --> rien ne se passe
  alert(global0);                       // --> 1
&lt;/script></pre>
		<br>
    <p><b>Une variable globale d√©finie avec le pr√©fixe "window." peut √©craser un getElementById implicite</b></p>
    <pre>&lt;div id=global1>&lt;/div>

&lt;script>
  global1.innerHTML = "global1";        // --> la div contient le texte "global1" 
  console.log(global1);                 // --> [object HTMLDivElement]
  window.global1 = 1;                   // Essayons d'√©craser global1
  console.log(global1);                 // --> 1
&lt;/script></pre>
    <br>
    <p><b>Si on essaye d'√©craser un getElementById implicite avec une variable globale d√©finie sans aucun pr√©fixe, voici ce qui se passe:</b></p>
    <pre>&lt;div id=global2>&lt;/div>

&lt;script>
  global2.innerHTML = "global2";        // --> la div contient le texte "global2" 
  try{global2 = 1}                      // Essayons d'√©craser global2
  catch(e){alert(e)}                    // --> TypeError sur IE < 9 / pas d'erreur ailleurs
  console.log(global2);                 // --> [object HTMLDivElement] sur IE < 9 / 1 ailleurs
&lt;/script></pre>
    <br>
    <p><b>Et enfin, si on essaye d'√©craser un getElementById implicite avec une variable globale d√©finie avec un "var", voici ce qui se passe:</b></p>
    <pre>&lt;div id=global3>&lt;/div>

&lt;script>
  global3.innerHTML = "global3";        // --> Uncaught TypeError: Cannot set property 'innerHTML' of undefined
  console.log(global3);                 // --> undefined
  var global3 = 1;                      // --> Essayons d'√©craser global3
  console.log(global3);                 // --> 1
&lt;/script></pre>
    <br>
    <p>Dans ce cas-l√†, la pr√©sence du mot-cl√© "var" √† la ligne 3 change l'ordre dans lequel le code JS est pars√©, et √ßa fait bugger les lignes 1 et 2.</p>
    <hr>
    <p>En conclusion, cette astuce est pratique dans quelques cas particuliers o√π on souhaite ni installer une lourde librairie, ni appeler la longue fonction <b>document.getElementById()</b>, notamment dans des √©preuves de code golfing. Mais dans le cadre professionnel, il est plus prudent de continuer √† utiliser les bonnes vieilles m√©thodes natives car les pi√®ges des <b>document.getElementById</b> implicites sont nombreux, et √ßa peut mener √† des heures de d√©bogage...</p>
		<br>
		A bient√¥t!
		<br>
		<b>@MaximeEuziere</b>
	</div>
</div>

<div class=section id=textshadows_en>
	<h2>The joys of text-shadow... on IE.</h2>
	<h3>septembre 2013</h3>
	<div id=text-shadow_en>
		<p>We don't present <b>text-shadow</b> anymore, this CSS property allowing to set a shadow to a text.<br>(see: <a href="http://www.w3.org/TR/css3-text/#text-shadow" target=_blank>the specs</a>, <a href="https://developer.mozilla.org/fr/docs/CSS/text-shadow" target=-blank>the MDN page</a>)</p>
		<p>Many browsers have some small implementation problems, but the worst are, of course, the old IE. More precisely, IE &lt; 10.</p>
		<p>However, those browsers have access to proprietary "filters", created by Microsoft, and allowing to achieve a similar effect.<br>Sometimes, we have no other choice than using them. This article explains how.</p>
		<p>Two filters allow to simulate shadows: Shadow and Glow.</p>
		<p><b>Here is the "Shadow" version:</b></p>
		<p>CSS:</p>
		<pre style="white-space: nowrap; overflow: auto">h1 {
<br>
&nbsp; text-shadow: 2px 2px 3px #ff0000; /* IE10+, Firefox 3.5+, Opera 9.5+, Chrome, Safari, and mobile browsers */
<br>
&nbsp; filter:progid:DXImageTransform.Microsoft.Shadow(color='#ff0000', Direction=135, Strength=3); zoom: 1; /* IE 6-9 */
<br>
}</pre>
		<p>HTML:</p>
		<pre>&lt;h1>Shadowed title&lt;/h1></pre>
		<p>Rendu:</p>
  	<style class=hidden>h1.ombre1 { text-shadow: 2px 2px 3px #ff0000; filter:progid:DXImageTransform.Microsoft.Shadow(color='#ff0000', Direction=135, Strength=3); zoom: 1; }</style>
		<div class=demo>
			<h1 class=ombre1>Shadowed title</h1>
		</div>
		<p>If you look at this wonderful demo on an old IE (or on IE10 in legacy mode) you will see a shadow. But you will also notice that the text became all pixellized, and unfortunately, there is no solution for that.</p>
		<p>Please note that "Direction" is set in degrees (for example, 0 = up, 90 = right, 180 = bottom, 270 = left) and "Strength" vaguely corresponds to the shadow's spread. (in reality, it looks more like a perspective effect...)</p>
		<p><b>And here is the "Glow" version</b></p>
		<p>CSS:</p>
		<pre style="white-space: nowrap; overflow: auto">h1 {
<br>
&nbsp; text-shadow: 0px 0px 1px #ff0000; /* Good browsers */
<br>
&nbsp; filter: glow(color=#ff0000,strength=3); zoom: 1; /* IE 6-9 */
<br>
}</pre>
		<p>HTML:</p>
		<pre>&lt;h1>Glowing title&lt;/h1></pre>
		<p>Rendu:</p>
  	<style class=hidden>.ombre2 { text-shadow: 0px 0px 3px #ff0000; filter: glow(color=#ff0000,strength=1); zoom: 1; }</style>
		<div class=demo>
			<h1 class=ombre2>Glowing title</h1>
		</div>
		<p>The Glow filter mainly creates a halo around the text. But it's still quite ugly on IE. (you can have something less ugly if you don't exaggerate this much on the colours)</p>
		<hr>
		<p>Note that the filters can be combined, like the CSS3 text-shadows. It's useful, especially when we want a "text-stroke" effect.</p>
		<pre style="white-space: nowrap; overflow: auto">h1 {
<br>
&nbsp; text-shadow: 1px 1px 1px #ff0000, 1px -1px 1px #00ff00, -1px -1px 1px #0000ff, 1px 1px 1px #f0000f; /* Good browsers */
<br>
&nbsp; filter: progid:DXImageTransform.Microsoft.Shadow(color='#ff0000', Direction=0, Strength=1), progid:DXImageTransform.Microsoft.Shadow(color='#00ff00', Direction=90, Strength=1), progid:DXImageTransform.Microsoft.Shadow(color='#0000ff', Direction=180, Strength=1), progid:DXImageTransform.Microsoft.Shadow(color='#f0000f', Direction=270, Strength=1); zoom: 1; /* IE 6-9 */
<br>
}</pre>
		<p>HTML:</p>
		<pre>&lt;h1>Titre with many shadows&lt;/h1></pre>
		<p>Rendu:</p>
  	<style class=hidden>.ombre3 { text-shadow: 1px 1px 1px #ff0000, 1px -1px 1px #00ff00, -1px -1px 1px #0000ff, 1px 1px 1px #f0000f; filter: progid:DXImageTransform.Microsoft.Shadow(color='#ff0000', Direction=0, Strength=1), progid:DXImageTransform.Microsoft.Shadow(color='#00ff00', Direction=90, Strength=1), progid:DXImageTransform.Microsoft.Shadow(color='#0000ff', Direction=180, Strength=1), progid:DXImageTransform.Microsoft.Shadow(color='#f0000f', Direction=270, Strength=1); zoom: 1;}</style>
		<div class=demo>
			<h1 class=ombre3>Titre with many shadows</h1>
		</div>
		<p>Keep in mind that it's very verbose, and very ugly on IE, when it's not used correctly.</p>
		<hr>
		<p>Besides, I have an exclusive bug to show you:</p>
		<p>These browsers only work on block elements, not on inline elements.</p>
    <p>So if you need shadows on a &lt;span>, you'll have to write some nonsense like... <b>span { display: block }</b>.</p>
		<br>
		<br>
		Cheers!
		<br>
		<b>@MaximeEuziere</b>
	</div>
</div>

<div class=section id=textshadows_fr style=display:none>
	<h2>Les joies du text-shadow... sur IE.</h2>
	<h3>septembre 2013</h3>
	<div id=text-shadow_fr>
		<p>On ne pr√©sente plus <b>text-shadow</b>, cette propri√©t√© CSS3 permettant d'appliquer une ombre √† un texte.<br>(voir: <a href="http://www.w3.org/TR/css3-text/#text-shadow" target=_blank>les specs</a>, <a href="https://developer.mozilla.org/fr/docs/CSS/text-shadow" target=-blank>la page MDN</a>)</p>
		<p>Plusieurs navigateurs ont des petits soucis d'impl√©mentation, mais les plus notables sont, bien √©videmment, les vieux IE. Plus pr√©cis√©ment, IE &lt; 10.</p>
		<p>Ceux-ci ont toutefois acc√®s √† des "filtres" cr√©√©s par Microsoft, et qui permettant de produire un effet similaire.<br>Et parfois, on n'a pas le choix, il faut s'en servir. Voici comment faire.</p>
		<p>Deux filtres permettent de simuler des ombres: Shadow et Glow.</p>
		<p><b>Voici la version "Shadow":</b></p>
		<p>CSS:</p>
		<pre style="white-space: nowrap; overflow: auto">h1 {
<br>
&nbsp; text-shadow: 2px 2px 3px #ff0000; /* IE10+, Firefox 3.5+, Opera 9.5+, Chrome, Safari, et tous avigateurs mobiles */
<br>
&nbsp; filter:progid:DXImageTransform.Microsoft.Shadow(color='#ff0000', Direction=135, Strength=3); zoom: 1; /* IE 6-9 */
<br>
}</pre>
		<p>HTML:</p>
		<pre>&lt;h1>Titre ombr√©&lt;/h1></pre>
		<p>Rendu:</p>
  	<style class=hidden>h1.ombre1 { text-shadow: 2px 2px 3px #ff0000; filter:progid:DXImageTransform.Microsoft.Shadow(color='#ff0000', Direction=135, Strength=3); zoom: 1; }</style>
		<div class=demo>
			<h1 class=ombre1>Titre ombr√©</h1>
		</div>
		<p>Si vous regardez cette magnifique d√©mo sur un vieux IE (ou sur IE10 en mode vieux IE) vous verrez bien une ombre. Mais vous verrez aussi que le texte est devenu tout pixellis√©, et il n'y a h√©las aucun moyen de corriger cela.</p>
		<p>Il est √† noter que "Direction" s'exprime en degr√©s (par exemple, 0 = haut, 90 = droite, 180 = bas, 270 = gauche) et "Strength" correspond vaguement √† l'√©talement de l'ombre. (en r√©alit√©, √ßa ressemble plus √† un effet de profondeur qu'√† une ombre)</p>
		<p><b>Et voici la version "Glow"</b></p>
		<p>CSS:</p>
		<pre style="white-space: nowrap; overflow: auto">h1 {
<br>
&nbsp; text-shadow: 0px 0px 1px #ff0000; /* Bons navigateurs */
<br>
&nbsp; filter: glow(color=#ff0000,strength=3); zoom: 1; /* IE 6-9 */
<br>
}</pre>
		<p>HTML:</p>
		<pre>&lt;h1>Titre entour√© d'ombre&lt;/h1></pre>
		<p>Rendu:</p>
  	<style class=hidden>.ombre2 { text-shadow: 0px 0px 3px #ff0000; filter: glow(color=#ff0000,strength=1); zoom: 1; }</style>
		<div class=demo>
			<h1 class=ombre2>Titre entour√© d'ombre</h1>
		</div>
		<p>Le filtre Glow permet plut√¥t de cr√©er un halo autour du texte. Cela dit, c'est bien moche sur IE. (oui, j'ai un peu ex√©g√©r√© avec mon texte en gras et mes ombres en rouge, il y a moyen de faire quelque chose qui soit... passable.)</p>
		<hr>
		<p></p>Il est √† noter que les filters peuvent √™tre addition√©s, tout comme les text-shadow CSS3. C'est pratique, notamment pour obtenir un effet √† la "text-stroke" (pour dessiner le contour des lettres).</p>
		<pre style="white-space: nowrap; overflow: auto">h1 {
<br>
&nbsp; text-shadow: 1px 1px 1px #ff0000, 1px -1px 1px #00ff00, -1px -1px 1px #0000ff, 1px 1px 1px #f0000f; /* Bons navigateurs */
<br>
&nbsp; filter: progid:DXImageTransform.Microsoft.Shadow(color='#ff0000', Direction=0, Strength=1), progid:DXImageTransform.Microsoft.Shadow(color='#00ff00', Direction=90, Strength=1), progid:DXImageTransform.Microsoft.Shadow(color='#0000ff', Direction=180, Strength=1), progid:DXImageTransform.Microsoft.Shadow(color='#f0000f', Direction=270, Strength=1); zoom: 1; /* IE 6-9 */
<br>
}</pre>
		<p>HTML:</p>
		<pre>&lt;h1>Titre avec plusieurs ombres&lt;/h1></pre>
		<p>Rendu:</p>
  	<style class=hidden>.ombre3 { text-shadow: 1px 1px 1px #ff0000, 1px -1px 1px #00ff00, -1px -1px 1px #0000ff, 1px 1px 1px #f0000f; filter: progid:DXImageTransform.Microsoft.Shadow(color='#ff0000', Direction=0, Strength=1), progid:DXImageTransform.Microsoft.Shadow(color='#00ff00', Direction=90, Strength=1), progid:DXImageTransform.Microsoft.Shadow(color='#0000ff', Direction=180, Strength=1), progid:DXImageTransform.Microsoft.Shadow(color='#f0000f', Direction=270, Strength=1); zoom: 1;}</style>
		<div class=demo>
			<h1 class=ombre3>Titre avec plusieurs ombres</h1>
		</div>
		<p>Cela dit, c'est tr√®s verbeux, et √©galement tr√®s moche sur IE si on s'en sert mal.</p>
		<hr>
		<p>A part √ßa, j'ai un petit bug bonus, en exclusivit√©:</p>
		<p>Ces filtres ne marchent que sur les blocs, et pas sur les √©l√©ments inline.</p>
		<p>Autrement dit, si on vous demande de mettre des ombres sur des <b>span</b>, la seule solution sera d'√©crire le non-sens suivant: <b>span { display: block }</b> ... et prier pour que √ßa ne casse pas toute votre page...</p>
		<br>
		<br>
		A bient√¥t!
		<br>
		<b>@MaximeEuziere</b>
	</div>
</div>
	
	
<div class=section id=lists_en>
	<h2>Ordered and unordered lists</h2>
	<h3>august 2013</h3>
	<div id=listscontent_en>
		<p>HTML lists... we all know them by heart: they exist since the first versions of HTML and XHTML, and they almost didn't change since then. They also work on all browsers.</p>
		<p>Let's study their HTML.<br><b>&lt;ul></b> means "unordered list", <b>&lt;ol></b> means "ordered list", et <b>&lt;li></b> means "list item".<br>Here is their simplest form (note that the &lt;/li> are optionals)</p>
		<p><b>Demo:</b></p>
		<pre>&lt;ul>
  &lt;li>Element 1
  &lt;li>Element 2
  &lt;li>Element 3
&lt;/ul>

&lt;ol>
  &lt;li>Element 1
  &lt;li>Element 2
  &lt;li>Element 3
&lt;/ol></pre>
		Result:
		<div class=demo>
			<ul>
				<li>Element 1
				<li>Element 2
				<li>Element 3
			</ul>
			<br>
			<ol>
				<li>Element 1
				<li>Element 2
				<li>Element 3
			<ol>
		</div>
		<p>The <b>li</b> can also contain <b>ul</b> or <b>ol</b> sub-lists. (but we'll talk about that later)</p>
		<p>The lists also have specific attributes:</p>
		<ul>
			<li><b>&lt;ul></b> (and its <b>&lt;li></b>s) can have a "type" attribute, with the value "circle", "square" or "disc". This allows to change their ticks ("circle" by default).</li>
			<li><b>&lt;ol></b> (and its <b>&lt;li></b>s) can also have a "type" attribute, with values like "A", "a", "I", "i", "1". This allows to set their number notation ("1" by default).</li>
			<li>You should avoid the type attribute, and use CSS instead (we'll come to this later)</li>
			<li><b>&lt;ol></b> can have a "start" attribute telling where the numbering should begin, and its <b>&lt;li></b>s can have a "value" attribute to change their default number, and the following ones. (This works on IE6+)</li>
		</ul>
		<p><b>D√©mo:</b></p>
		<pre>&lt;ol start="10">
  &lt;li>Element 10
  &lt;li>Element 11
  &lt;li>Element 12
  &lt;li value="20">Element 20
  &lt;li>Element 21
  &lt;li>Element 22
  &lt;li value="5">Element 5
  &lt;li>Element 6
  &lt;li>Element 7
&lt;/ol></pre>
		Ce qui donne:
		<div class=demo>
			<ol start="10">
				<li>Element 10
				<li>Element 11
				<li>Element 12
				<li value="20">Element 20
				<li>Element 21
				<li>Element 22
				<li value="5">Element 5
				<li>Element 6
				<li>Element 7
			</ol>
		</div>
		<ul>
			<li>And finally,  <b>&lt;ol></b> can have a "reversed" attribute (appeared with HTML5) allowing to count the elements from bottom up. But since it doesn't work on IE &lt; 11, you should rather set a decreasing "value" to each <b>&lt;li></b> to get the same effect.</li>
		</ul>
		<hr>
		<p>Now let's see their default CSS code, and their dedicated CSS properties:</p>
		<p><b>&lt;ul></b> and <b>&lt;ol></b> are normal blocks (display: block). They have a default padding-left that depends on the browser (around 40px). The ticks are included in this padding and they can't be selected as normal text with the mouse.</p>
		<p><b>&lt;ul></b> has disc-shaped bullets (list-style: disc outside none).</p>
		<p><b>&lt;ol></b> has numbers in front of each element (list-style: decimal outside none).</p>
		<p><b>&lt;li></b> have a special display (display: list-item), almost identical to display: block. They also have a list-style (inherited), but they can overload it individually.</p>
		<p>
		The <b>list-style</b> property is a shorthand notation allowing to set three parameters:<br>
		<ul>
			<li><b>list-style-type</b> (that can have <a href="https://developer.mozilla.org/fr/docs/CSS/list-style-type" target=_blank>many many values</a>),</li>
			<li><b>list-style-position</b> (that can have the value "inside", "outside" or "inherit". Inside allows them to contain their own ticks, instead of letting them stay in their parent's padding.)</li>
			<li><b>list-style-image</b>, which is "none" by default, but it can also be the url of an image. If the URL is invalid (or if the image isn't fount), there is a fallback on the default list-style-type (disc, decimal, ...).</li>
		</ul>
		</p>
		<hr>
		<p>Now let's see the different problems that lists can cause us:</p>
		<p>&nbsp;&bull;
			If you apply a <a href="http://meyerweb.com/eric/tools/css/reset/" target=_blank>CSS reset</a> to your page, it will delete the paddings on <b>ul</b> and <b>ol</b> elements, and their ticks will be hidden.
			<br>
			<b>Solution 1</b>: put the ticks inside the <b>li</b> with this rule:
			<pre>ul, ol { list-style-position: inside }</pre>
			The ticks reappear, but we still lose the indentation of nested lists.
			<br>
			<pre>&lt;ul>
  &lt;li>list
  &lt;li>list
    &lt;ol>
      &lt;li>sub-list
      &lt;li>sub-list
    &lt;/ol>
&lt;/ul></pre>
			<div class=demo>
				<ul style="list-style-position: inside; margin: 0; padding: 0;">
				<li style="margin: 0; padding: 0;">list
				<li style="margin: 0; padding: 0;">list
					<ol style="list-style-position: inside; margin: 0; padding: 0; display: block">
						<li style="margin: 0; padding: 0;">sub-list
						<li style="margin: 0; padding: 0;">sub-list
					</ol>
				</ul>
			</div>

			<b>Solution 2 (the good one)</b>: don't change the ticks position, but re-set a padding-left to the lists, like this:
			<br>
			<pre>ul, ol { padding-left: 2em }</pre>
			Result:
			<div class=demo>
				<ul>
				<li>list
				<li>list
					<ol style="display:block">
						<li>sub-list</li>
						<li>sub-list</li>
					</ol>
				</ul>
			</div>
			Indeed, the padding-left are cumulative, and so the nested lists are correctly indented. 
		</p>
		<p>
		&nbsp;&bull; If we nest ordered lists, their numbers will stay the same (decimal notation). A good typographic practice is to do this:
			<pre>ol { list-style-type: decimal }
ol ol { list-style: upper-alpha }
ol ol ol { list-style:  lower-roman }
ol ol ol ol { list-style: lower-alpha }</pre>
			<br>
			Which allows nested lists as pretty as this, with up to four levels:
			<div class=demo>
			<ol>
				<li>level 1</li>
				<li>item</li>
				<li>item</li>
				<li><ol>
						<li>level 2</li>
						<li>item</li>
						<li>item</li>
						<li><ol>
								<li>level 3</li>
								<li>item</li>
								<li>item</li>
								<li><ol>
										<li>level 4</li>
										<li>item</li>
										<li>item</li>
									</ol>
							</ol>
					</ol>
			</ol>
			</div>
		</p>
		<p>
		&nbsp;&bull;
				The CSS resets generally set a vertical-align: baseline and a line-height: 1.5em to all the elements of the page, and this causes a problem on IE &lt; 8 when we have nested lists.
				<br>
				Indeed, if you watch the following list on IE &lt; 8, you will see the numbers "fall" at the bottom of the sub-lists, and the ticks will be misaligned with the text ahead.
				<br>
				<div class=demo>
				<ol>
					<li>level 1</li>
					<li>item</li>
					<li>item</li>
					<li style="vertical-align: baseline"><ol>
							<li>level 2</li>
							<li>item</li>
							<li>item</li>
							<li style="vertical-align: baseline"><ol>
									<li>level 3</li>
									<li>item</li>
									<li>item</li>
									<li style="vertical-align: baseline"><ol>
											<li>level 4</li>
											<li>item</li>
											<li>item</li>
										</ol>
								</ol>
						</ol>
				</ol>
			</div>
			<p>To fix the "falling" ticks, use this CSS dode:</p>
			<pre>ol, ul, li { vertical-align: top }</pre>
			<p>To fix the alignment between the ticks and the text, there is no miracle solution, but five possible approaches:</p>
			<ul>
				<li>Consider that an offset of a few pixels is not a big deal on IE &lt; 8, and do nothing.</li>
				<li>Put a "1em" line-height on all the page.</li>
				<li>Let the default line-height to "1.5em", but set the &lt;li>'s line-height to "1em" and their padding to "0.25em 0", which will do the job, unless the text of the &lt,li> spreads on two lines or more, because these lines would be very close.</li>
				<li>Replace the default tick with an image that looks like a tick, but with a few pixels of vertical offset.</li>
				<li>
					Or... (and this is the solution I recommend) put an element (like a &lt;span>) in each &lt;li>, and apply this style:
					<pre>li span { *position: relative; *top: -0.5em }</pre>
					Result:
					<div class=demo>
						<ul>
							<li><span style="*position: relative; *top: -0.5em">Item 1</span></li>
							<li><span style="*position: relative; *top: -0.5em">Item 2</span></li>
							<li><span style="*position: relative; *top: -0.5em">Item 3</span></li>
						</ul>
					</div>
				</li>
			</ul>
			<p>However, there is a bug on all the NEWER versions of IE (except IE6 and 7!), which you can see here:</p>
			<div class=demo>
			<ol>
				<li>level 1</li>
				<li>item</li>
				<li>item</li>
				<li><ol style="display: block">
						<li>level 2</li>
						<li>item</li>
						<li>item</li>
						<li><ol style="display: block">
								<li>level 3</li>
								<li>item</li>
								<li>item</li>
								<li><ol style="display: block">
										<li>level 4</li>
										<li>item</li>
										<li>item</li>
									</ol>
							</ol>
					</ol>
			</ol>
			</div>
			<p>Each sub-list has a huge gap on top. It's not a margin or a padding, it's an IE bug. To get rid of it, you can set float: left to the lists (but it could lead to flow issues), or put them in display: inline-block (that's what I recommend):</p>
			<pre>li ul, li ol { display: inline-block }</pre>
			<p>So, everything is correct now.</p>
			<p>Other list-related bugs and their solutions are described <a href="http://stylisticweb.com/design-tutorials/15-ie6-bugs-and-simple-solutions" target=_blank>here</a>, but I won't talk about them because they are too much specific.</p>
			<hr>
			<p>Instead, let's talk about the original things that we can do with HTML lists:</p>
			<ul>
				<li>
					A &lt;li> can live without a &lt;ol> or a &lt;ul> around it. In this case, it will have a circle-shaped tick (on all the browsers).
				</li>
				<li>
					A &lt;ul> / &lt;ol> can contain elements that are not &lt;li>. (or even some text). These elements won't have a tick or a number.
				</li>
				<li>
					There are several easy ways to display a list on many columns.<br><a href="http://alistapart.com/article/multicolumnlists" target=_blank>This article</a> is exhaustive on this subject.
				</li>
				<li>
					A list can look like a file tree with a simple 1px image and some ingenious CSS code: <a href="http://css-tricks.com/style-a-list-with-one-pixel/" target=_blank>take a look at this</a>.
				</li>
				<li>
					The &lt;li> elements can use one (or many) unicode character(s) as their ticks, thanks to CSS3 (and it works on IE8+):
					<pre>li { list-style: none }
li:before { content: ">>"; margin:0 1em 0 -3em;  }</pre>
          Result:
					<style style="display: none">
					.custombullet li { list-style: none }
					.custombullet li:before { content: ">>"; margin: 0 1em 0 -3em; }
					</style>
					<div class=demo>
						<ul class=custombullet>
							<li>Item 1</li>
							<li>Item 2</li>
							<li>Item 3</li>
						</ul>
					</div>
				</li>
			</ul>
			<p>I'll stop here, and I invite you to look at <a href="//xem.github.io/Blog" target="_blank">my last project, Basis</a>: a basic "boilerplate" for HTML/CSS/JS pages, with a custom CSS reset that contains all these best practices, and many others.</p>
			<br>
			<br>
			Cheers!
			<br>
			<b>@MaximeEuziere</b>
	</div>
</div>

<div class=section id=lists_fr style=display:none>
	<h2>Les listes ordonn√©es et non-ordonn√©es</h2>
	<h3>ao√ªt 2013</h3>
	<div id=listscontent_fr>
		<p>Les listes HTML... tout le monde les conna√Æt par coeur: elles existent depuis les toutes premi√®res versions d'HTML et XHTML, et sont rest√©es quasiment inchang√©es jusqu'√† aujourd'hui. Elles fonctionnent d'ailleurs sur tous les navigateurs.</p>
		<p>Etudions tout d'abord leur HTML.<br><b>&lt;ul></b> signifie "unordered list", <b>&lt;ol></b> signifie "ordered list", et <b>&lt;li></b> signifie "list item".<br>Voici leur √©criture la plus simple: (vous noterez que les &lt;/li> sont optionnels)</p>
		<p><b>D√©mo:</b></p>
		<pre>&lt;ul>
  &lt;li>Element 1
  &lt;li>Element 2
  &lt;li>Element 3
&lt;/ul>

&lt;ol>
  &lt;li>Element 1
  &lt;li>Element 2
  &lt;li>Element 3
&lt;/ol></pre>
		Ce qui donne:
		<div class=demo>
			<ul>
				<li>Element 1
				<li>Element 2
				<li>Element 3
			</ul>
			<br>
			<ol>
				<li>Element 1
				<li>Element 2
				<li>Element 3
			<ol>
		</div>
		<p>Les <b>li</b> peuvent √† leur tour contenir des sous-listes <b>ul</b> ou <b>ol</b>. (mais nous en reparlerons plus tard)</p>
		<p>Les listes ont √©galement des attributs sp√©cifiques:</p>
		<ul>
			<li>L'<b>&lt;ul></b> (et ses <b>&lt;li></b>) peuvent avoir un attribut type, ayant comme valeur "circle", "square" ou "disc". Cela permet de changer leurs puces (par d√©faut √† "circle").</li>
			<li>L'<b>&lt;ol></b> (et ses <b>&lt;li></b>) peuvent aussi avoir un attribut type, ayant comme valeur "A", "a", "I", "i", "1". Cela permet de changer leurs num√©rotations (par d√©faut √† "1").</li>
			<li>L'attribut type est toutefois √† √©viter, il vaut mieux faire ces modifications avec du CSS. (on va en reparler)</li>
			<li>L'<b>&lt;ol></b> peut avoir un attribut "start" disant o√π doit commencer la num√©rotation, et ses <b>&lt;li></b> peuvent avoir un attribut "value" changeant le num√©ro de l'√©l√©ment courant, et de ceux qui suivent. (et c'est compatible IE6+)</li>
		</ul>
		<p><b>D√©mo:</b></p>
		<pre>&lt;ol start="10">
  &lt;li>Element 10
  &lt;li>Element 11
  &lt;li>Element 12
  &lt;li value="20">Element 20
  &lt;li>Element 21
  &lt;li>Element 22
  &lt;li value="5">Element 5
  &lt;li>Element 6
  &lt;li>Element 7
&lt;/ol></pre>
		Ce qui donne:
		<div class=demo>
			<ol start="10">
				<li>Element 10
				<li>Element 11
				<li>Element 12
				<li value="20">Element 20
				<li>Element 21
				<li>Element 22
				<li value="5">Element 5
				<li>Element 6
				<li>Element 7
			</ol>
		</div>
		<ul>
			<li>Et enfin, <b>&lt;ol></b> peut avoir un attribut "reversed" (apparu en HTML5) servant √† compter √† l'envers (de bas en haut). Mais vu qu'il ne fonctionne pas sur IE &lt; 11, il est pr√©f√©rable de mettre directement des "value" d√©croissantes √† chaque <b>&lt;li></b> pour obtenir cet effet.</li>
		</ul>
		<hr>
		<p>Voyons maintenant leur code CSS par d√©faut, et les propri√©t√©s CSS qui leurs sont d√©di√©es:</p>
		<p><b>&lt;ul></b> et <b>&lt;ol></b> sont des blocs classiques (display: block). Ils ont un padding-left qui varie selon les navigateurs (environ 40px). Les puces sont incluses dans ce padding et ne peuvent pas √™tre s√©lectionn√©es √† la souris, en tant que texte.</p>
		<p>L'<b>&lt;ul></b> a des puces en forme de disque (list-style: disc outside none).</p>
		<p>L'<b>&lt;ol></b> a des num√©ros en face de chaque √©l√©ment (list-style: decimal outside none).</p>
		<p>Les <b>&lt;li></b> ont un affichage particulier (display: list-item), quasiment identique √† du display: block. Ils ont √©galement un list-style h√©rit√© de leur parent, mais qui peut √™tre surcharg√© individuellement.</p>
		<p>
		La propri√©t√© CSS <b>list-style</b> est une √©criture shorthand qui peut √™tre utilis√©e pour fixer trois param√®tres:<br>
		<ul>
			<li><b>list-style-type</b> (pouvant avoir <a href="https://developer.mozilla.org/fr/docs/CSS/list-style-type" target=_blank>une multitude de valeurs</a>),</li>
			<li><b>list-style-position</b> (qui peut avoir comme valeur "inside", "outside" et "inherit", inside leur permettant de contenir leurs puces, au lieu de les laisser dans le padding du parent.)</li>
			<li><b>list-style-image</b>, qui est par d√©faut √† "none", mais qu'on peut remplacer par l'url d'une image. Si l'URL est invalide (ou si l'image est absente), c'est le list-style-type (disque, d√©cimal, ...) qui sera utilis√© comme fallback.</li>
		</ul>
		</p>
		<hr>
		<p>Voyons maintenant les diff√©rents probl√®mes que les listes peuvent nous poser:</p>
		<p>&nbsp;&bull;
			Si vous appliquez un <a href="http://meyerweb.com/eric/tools/css/reset/" target=_blank>CSS reset</a> √† votre page, celui-ci va supprimer les paddings des <b>ul</b> et des <b>ol</b>, ce qui cachera leurs puces.
			<br>
			<b>Solution 1</b>: mettre les puces dans les <b>li</b> gr√¢ce √† cette r√®gle:
			<pre>ul, ol { list-style-position: inside }</pre>
			Les puces r√©apparaissent, mais on perd l'indentation des listes imbriqu√©es.
			<br>
			<pre>&lt;ul>
  &lt;li>liste
  &lt;li>liste
    &lt;ol>
      &lt;li>sous-liste
      &lt;li>sous-liste
    &lt;/ol>
&lt;/ul></pre>
			<div class=demo>
				<ul style="list-style-position: inside; margin: 0; padding: 0;">
				<li style="margin: 0; padding: 0;">liste
				<li style="margin: 0; padding: 0;">liste
					<ol style="list-style-position: inside; margin: 0; padding: 0; display: block">
						<li style="margin: 0; padding: 0;">sous-liste
						<li style="margin: 0; padding: 0;">sous-liste
					</ol>
				</ul>
			</div>

			<b>Solution 2 (la bonne)</b>: ne pas toucher √† la position des puces, mais remettre un padding-left aux listes, comme ceci:
			<br>
			<pre>ul, ol { padding-left: 2em }</pre>
			Ce qui donne:
			<div class=demo>
				<ul>
				<li>liste
				<li>liste
					<ol style="display:block">
						<li>sous-liste</li>
						<li>sous-liste</li>
					</ol>
				</ul>
			</div>
			En effet, les padding-left s'additionnent, ce qui permet √† la sous-liste d'√™tre plus indent√©e que sa liste parente. 
		</p>
		<p>
		&nbsp;&bull; Si on imbrique plusieurs listes ordonn√©es, leurs num√©rotations seront identiques (notation d√©cimale). Une bonne pratique typographique consiste √† faire ceci:
			<pre>ol { list-style-type: decimal }
ol ol { list-style: upper-alpha }
ol ol ol { list-style:  lower-roman }
ol ol ol ol { list-style: lower-alpha }</pre>
			<br>
			Ce qui permet d'avoir des listes imbriqu√©es aussi jolies que ceci, quand quatre listes ordonn√©es sont imbriqu√©es:
			<div class=demo>
			<ol>
				<li>level 1</li>
				<li>item</li>
				<li>item</li>
				<li><ol>
						<li>level 2</li>
						<li>item</li>
						<li>item</li>
						<li><ol>
								<li>level 3</li>
								<li>item</li>
								<li>item</li>
								<li><ol>
										<li>level 4</li>
										<li>item</li>
										<li>item</li>
									</ol>
							</ol>
					</ol>
			</ol>
			</div>
		</p>
		<p>
		&nbsp;&bull;
				Les CSS resets mettent g√©n√©ralement un vertical-align: baseline et un line-height: 1.5em √† tous les √©l√©ments de la page, et √ßa pose probl√®me sur IE &lt; 8 dans le cas o√π on a des listes imbriqu√©es.
				<br>
				En effet, en regardant la liste suivante sur IE &lt; 8, vous verrez les num√©ros "tomber" tout en bas des sous-listes, et les puces seront mal align√©es avec les textes en face.
				<br>
				<div class=demo>
				<ol>
					<li>level 1</li>
					<li>item</li>
					<li>item</li>
					<li style="vertical-align: baseline"><ol>
							<li>level 2</li>
							<li>item</li>
							<li>item</li>
							<li style="vertical-align: baseline"><ol>
									<li>level 3</li>
									<li>item</li>
									<li>item</li>
									<li style="vertical-align: baseline"><ol>
											<li>level 4</li>
											<li>item</li>
											<li>item</li>
										</ol>
								</ol>
						</ol>
				</ol>
			</div>
			<p>Pour corriger les puces qui "tombent", utilisez ce CSS:</p>
			<pre>ol, ul, li { vertical-align: top }</pre>
			<p>Pour corriger l'alignement entre les puces et le texte, il n'y a pas de solution miracle, mais cinq approches possibles:</p>
			<ul>
				<li>Soit consid√©rer que quelques pixels de d√©calage sur IE &lt; 8, c'est pas grave, et ne rien faire.</li>
				<li>Soit mettre un line-height √† "1em" sur toute la page.</li>
				<li>Soit laisser le line-height par d√©faut √† "1.5em", mais mettre le line-height des &lt;li> √† "1em" et leur padding √† "0.25em 0", ce qui fera quasiment le m√™me effet qu'un line-height: 1.5em, l'inconv√©nient √©tant que si le texte d'un &lt;li> s'√©tale sur deux lignes, ces lignes seront tr√®s coll√©es.</li>
				<li>Soit remplacer la puce par une image qui a l'apparence d'une puce, mais d√©cal√©e de quelques pixels vers le bas.</li>
				<li>
					Soit (et c'est la solution que je pr√©conise) mettre un √©l√©ment (par exemple &lt;span>) dans chaque &lt;li>, et appliquer ce style:
					<pre>li span { *position: relative; *top: -0.5em }</pre>
					Ce qui donne:
					<div class=demo>
						<ul>
							<li><span style="*position: relative; *top: -0.5em">Item 1</span></li>
							<li><span style="*position: relative; *top: -0.5em">Item 2</span></li>
							<li><span style="*position: relative; *top: -0.5em">Item 3</span></li>
						</ul>
					</div>
				</li>
			</ul>
			<p>Il y a par contre un bug pr√©sent sur tous les derniers IE parus (sauf IE6 et 7!), et que vous pouvez observer ici:</p>
			<div class=demo>
			<ol>
				<li>level 1</li>
				<li>item</li>
				<li>item</li>
				<li><ol style="display: block">
						<li>level 2</li>
						<li>item</li>
						<li>item</li>
						<li><ol style="display: block">
								<li>level 3</li>
								<li>item</li>
								<li>item</li>
								<li><ol style="display: block">
										<li>level 4</li>
										<li>item</li>
										<li>item</li>
									</ol>
							</ol>
					</ol>
			</ol>
			</div>
			<p>Chaque sous-liste est d√©cal√©e vers le bas. Ce n'est pas une marge ni un padding, c'est un bug d'IE. Pour s'en d√©barasser, vous pouvez soit mettre les sous-listes en float:left (ce qui pose des probl√®mes de flot), soit (et c'est la bonne solution) les mettre en inline-block:</p>
			<pre>li ul, li ol { display: inline-block }</pre>
			<p>Avec √ßa, tout rentre dans l'ordre.</p>
			<p>D'autres bugs IE6/7 relatfs aux listes, et leurs solutions, sont d√©taill√©s <a href="http://stylisticweb.com/design-tutorials/15-ie6-bugs-and-simple-solutions" target=_blank>ici</a>, mais je n'en parlerai pas car ils apparaissent dans des cas trop sp√©cifiques.</p>
			<hr>
			<p>Parlons plut√¥t des choses originales qu'on peut faire avec des listes HTML:</p>
			<ul>
				<li>
					Un &lt;li> peut ne pas avoir d'&lt;ol> ou d'&lt;ul> autour. Il sera alors pr√©c√©d√© d'un cercle (et ce, sur tous les navigateurs).
				</li>
				<li>
					Un &lt;ul> / &lt;ol> peut contenir autre choses que des &lt;li>. (des √©l√©ments HTML ou du texte). Ceux-ci seront d√©nu√©s de puces ou de num√©ros.
				</li>
				<li>
					Il existe des moyens simples pour faire en sorte qu'une liste s'affiche sur plusieurs colonnes.<br><a href="http://alistapart.com/article/multicolumnlists" target=_blank>Cet article</a> traite ce sujet de fa√ßon exhaustive.
				</li>
				<li>
					Une liste peut ressembler √† une arborescence avec une image de 1px et du CSS ing√©nieux: <a href="http://css-tricks.com/style-a-list-with-one-pixel/" target=_blank>voyez plut√¥t</a>.
				</li>
				<li>
					Les &lt;li> peuvent avoir des caract√®res unicode comme puces, gr√¢ce au CSS3 (et √ßa marche sur IE8+):
					<pre>li { list-style: none }
li:before { content: ">>"; margin:0 1em 0 -3em;  }</pre>
				Ce qui donne:
					<style style="display: none">
					.custombullet li { list-style: none }
					.custombullet li:before { content: ">>"; margin: 0 1em 0 -3em; }
					</style>
					<div class=demo>
						<ul class=custombullet>
							<li>Item 1</li>
							<li>Item 2</li>
							<li>Item 3</li>
						</ul>
					</div>
				</li>
			</ul>
			<p>Sur ce, je m'arr√™te l√†, et je vous invite √† jeter un oeil √† <a href="//xem.github.io/Blog" target="_blank">mon dernier projet, Basis</a>: un point de d√©part (ou "boilerplate", comme on dit outre-France) pour faire des pages HTML/CSS/JS, avec un CSS reset maison qui inclut toutes ces techniques pour bien g√©rer les listes (imbriqu√©es) sur tous les navigateurs.</p>
			<br>
			<br>
			A bient√¥t!
			<br>
			<b>@MaximeEuziere</b>
	</div>
</div>



<div class=section id=contenteditable_en>
	<h2>The HTML contenteditable attribute</h2>
	<h3>july 2013</h3>
	<div id=contenteditablecontent_en>
		<p>The <b>contenteditable</b> attribute makes any HTML element editable with the mouse and/or the keyboard.</p>
		<p>
		This attribute is one of the <a href="http://dev.w3.org/html5/markup/global-attributes.html">HTML5 global attributes</a>, so it can be applied to all HTML5 elements.
		<br>
		It's also one of those features that existed in browsers for a long time before W3C standardization.
		<br>
		Indeed, <a href="http://caniuse.com/contenteditable">we can use this attribute</a> on browser as old as IE 5 and Firefox 3! Microsoft created it, by the way.
		</p>
		<p>
		It's easy to use: like <b>id</b> or <b>class</b>, you can use <b>contenteditable="true"</b> on any element, or simply <b>contenteditable</b>.
		<br>
		Note that this attribute is inherited by default. So the value <b>contenteditable="inherit"</b> is completely useless (but it exists).
		<br>
		However, if you want to make an element editable, but not its children, these children must have <b>contenteditable="false"</b>.
		</p>
		<p contenteditable><b>Example:</b> click on this paragraph to edit the text inside.</p>
		<hr>
		<p>Here's the list of crazy facts about <b>contenteditable</b>:</p>
		<ul>
			<li>
				Like we saw earlier, we can make an element non-editable if its parent is editable. The non-editable element can still be selected, moved and deleted.
				<p contenteditable><b>Example:</b> In this editable paragraph, <b contenteditable="false">this text in bold</b> can't be edited, but you can move and delete it with the mouse.</p>
				On Firefox, we can't move text from an editable container to another editable container... that's a bug.
			</li>
			<li>
				Firefox allows to resize images that have or inherit the <b>contenteditable</b> behavior.<br><br>
				<b>Example:</b><br>
				<p contenteditable> Click on this image <img src="http://placehold.it/200x50" style="vertical-align: middle"> to resize it.</p>
			</li>
			<li>
				Any HTML code can be inserted in an editable element
				<div contenteditable><b>Example:</b> You can copy-paste here<br><br>- The content of another Webpage:<br><br><br><br>- The content of a Word / Excel document:<br><br><br><br></div>
			</li>
			<li>
				Thanks to this attribute, we can make complete WYSIWYG editors, like <a href="http://ckeditor.com/demo#full">CKEditor</a>.
			</li>
			<li>
				You can also access to a quick notepad by typing <b>data:text/html, &lt;html contenteditable></b> in the address bar of your browser (or by clicking <a href="data:text/html, <html contenteditable>" target="_blank">here</a>).
				This trick comes from <a href="https://coderwall.com/p/lhsrcq">Jose Jesus Perez Aguinaga</a>.
				You can find many variations of this notepad <a href="https://news.ycombinator.com/item?id=5135194" target="_blank">here</a>. 
			</li>
			<li>If you make a <b>style</b> element visible and editable, this can make a crazy auto-recursive editor, in which you can edit in real time the style of the block you're writing into.<br>Try it:<br>
				<style spellcheck="false" contenteditable>style[contenteditable] {
	display: block;          /* make <style> blocks visible */
	white-space: pre;        /* presentation */
	font-family: monospace;  /* typography */
	background: #ddeeff;     /* background color */
	color: #112233;          /* text color */
}</style>
			</li>
			<li>
				<b>script</b> elements can also be visible and editable (here's an exemple). However, the JavaScript code isn't executed when you edit it. It's a simple text block.<br>
				<script contenteditable>console.log("Log unique");</script>
				<br>
				(open your F12 console to see this message)
				<br>
				But JavaScript itself allows to detect changes happening in a <b>script</b> element and ex√©cuter its content.<br>
				Warning: don't do this at home (XSS attacks can occur). This example is only a proof of concept.<br> 
				<script id="js" contenteditable>// This block has the id "js".
var js = document.getElementById("js");
js.onkeyup = function(){
	eval(js.innerText);
}
console.log("Log at each edition");</script>
				<br>
				This works fine on Chrome and IE 10. Sadly, Firefox and IE9 can't listen to keystrokes events on <b>script</b> elements... But you can replace them with textareas, which are natively editable.
			</li>
		</ul>
		<br>
		<br>
		Cheers!
		<br>
		<b>@MaximeEuziere</b>
	</div>
</div>

<div class=section id=contenteditable_fr style=display:none>
	<h2>L'attribut contenteditable en HTML5</h2>
	<h3>juillet 2013</h3>
	<div id=contenteditablecontent_fr>
		<p>L'attribut <b>contenteditable</b> permet de rendre le contenu de n'importe quel √©l√©ment HTML √©ditable avec le clavier et/ou la souris.</p>
		<p>
		Cet attribut fait partie des <a href="http://dev.w3.org/html5/markup/global-attributes.html">attributs globaux HTML5</a>, ce qui signifie qu'il peut potentiellement √™tre appliqu√© √† tous les √©l√©ments HTML5.
		<br>
		Il fait √©galement partie de ces fonctionnalit√©s qui ont exist√© dans les navigateurs bien avant d'avoir √©t√© standardis√©es par le W3C.
		<br>
		En effet, <a href="http://caniuse.com/contenteditable">on retrouve cet attribut</a> sur des navigateurs aussi anciens qu'IE 5 et Firefox 3! C'est d'ailleurs Microsoft qui l'a cr√©√©.
		</p>
		<p>
		Pour l'utiliser, rien de plus simple: tout comme vous pouvez appliquer un attribut <b>id</b> ou <b>class</b> √† un √©l√©ment HTML, vous pouvez utiliser <b>contenteditable="true"</b>, ou tout simplement <b>contenteditable</b>.
		<br>
		Il est √† noter que cet attribut est h√©rit√© par d√©faut. La valeur <b>contenteditable="inherit"</b> est donc compl√®tement inutile.
		<br>
		Par contre, si vous voulez rendre un √©l√©ment √©ditable mais pas ses descendants, ceux-ci doivent avoir <b>contenteditable="false"</b>.
		</p>
		<p contenteditable><b>Exemple:</b> cliquer sur ce paragraphe pour √©diter le texte qui s'y trouve.</p>
		<hr>
		<p>Voici maintenant la liste des trucs dingues concernant <b>contenteditable</b>:</p>
		<ul>
			<li>
				Comme on l'a vu plus haut, on peut rendre un √©l√©ment non √©ditable alors que son parent est √©ditable. L'√©l√©ment non √©ditable pourra toutefois √™tre s√©lectionn√©, d√©plac√© et supprim√©.
				<p contenteditable><b>Exemple:</b> Dans ce paragraphe √©ditable, on ne peut pas √©diter <b contenteditable="false">ce texte en gras</b> mais on peut le supprimer et le d√©placer √† l'aide de la souris.</p>
				Sur Firefox, on ne peut pas d√©placer du texte d'un bloc √©ditable √† un autre bloc √©ditable. C'est un bug.
			</li>
			<li>
				Firefox permet de redimensionner les images qui ont l'attribut <b>contenteditable</b> (ou qui en h√©ritent)<br><br>
				<b>Exemple:</b><br>
				<p contenteditable> Cliquez sur cette image <img src="http://placehold.it/200x50" style="vertical-align: middle"> pour la redimensionner.</p>
			</li>
			<li>
				On peut ins√©rer n'importe quel code HTML dans un √©l√©ment √©ditable
				<div contenteditable><b>Exemple:</b> copiez-collez ci-dessous<br><br>- Le contenu d'une autre page Web:<br><br><br><br>- Le contenu d'un document Word ou Excel:<br><br><br><br></div>
			</li>
			<li>
				Gr√¢ce √† cet attribut, on peut faire des √©diteurs WYSIWYG ultra-complets, comme <a href="http://ckeditor.com/demo#full">CKEditor</a>.
			</li>
			<li>
				On peut aussi avoir acc√®s √† un bloc-notes d'appoint en tapant <b>data:text/html, &lt;html contenteditable></b> dans la barre d'adresse de son navigateur (ou en cliquant <a href="data:text/html, <html contenteditable>" target="_blank">ici</a>).
				On doit cette astuce √† <a href="https://coderwall.com/p/lhsrcq">Jose Jesus Perez Aguinaga</a>.
				Vous trouverez <a href="https://news.ycombinator.com/item?id=5135194" target="_blank">ici</a> de nombreuses variations de ce bloc-botes. 
			</li>
			<li>Rendre un √©l√©ment <b>style</b> visible et √©ditable peut mener √† un √©diteur auto-r√©cursif assez dingue, √©tant donn√© que vous pouvez editer en direct le style du bloc dans lequel vous √©crivez.<br>Essayez ci-dessous:<br>
				<style spellcheck="false" contenteditable>style[contenteditable] {
	display: block;          /* rendre vidible les blocs <style> */
	white-space: pre;        /* pr√©sentation */
	font-family: monospace;  /* typographie */
	background: #ddeeff;     /* couleur de fond */
	color: #112233;          /* couleur de texte */
}</style>
			</li>
			<li>
				On peut aussi rendre les √©l√©ments <b>script</b> visibles et √©ditables (en voici un exemple). Toutefois, le code JavaScript n'est pas r√©ex√©cut√© automatiquement √† chaque modification.<br>
				<script contenteditable>console.log("Log unique");</script>
				<br>
				(ouvrez votre console F12 pour voir ce message)
				<br>
				Mais JavaScript, justement, permet de d√©tecter les changements qui ont lieu dans un √©l√©ment <b>script</b> et ex√©cuter son contenu.<br>
				Attention toutefois, √©valuer du code JS venant de vos visiteurs peut √™tre dangereux. L'exemple qui suit n'est qu'un proof of concept!<br> 
				<script id="js" contenteditable>// Ce bloc script a l'id "js".
var js = document.getElementById("js");
js.onkeyup = function(){
	eval(js.innerText);
}
console.log("Log √† chaque modification");</script>
				<br>
				Cela fonctionne tr√®s bien sur Chrome et IE 10. Firefox et IE9 sont h√©las capricieux et il est compliqu√© de leur faire ex√©cuter du code JS √† chaque modification d'un √©l√©ment <b>script</b>... A vrai dire, je ne suis m√™me pas s√ªr que √ßa soit possible. Faute de mieux, on peut continuer √† utiliser des textarea, qui sont nativement √©ditables et envoient les bons √©v√©nements.
			</li>
		</ul>
		<br>
		<br>
		A bient√¥t!
		<br>
		<b>@MaximeEuziere</b>
	</div>
</div>


<div class=section id=doctype_fr>
	<h2>Le doctype HTML5</h2>
	<h3>juin 2013</h3>
	<div id=doctype>
		<p>Le doctype n'est pas un √©l√©ment HTML comme les autres, c'est un pr√©ambule qui sert √† dire au navigateur comment il doit afficher le reste de la page.</p>
		<p>Ce pr√©ambule existe depuis HTML2 et XHTML1. Toutefois, jusqu'√† l'apparition d'HTML5, les doctypes √©taient de tr√®s longues cha√Ænes impossibles √† m√©moriser par coeur, et pour peu qu'on fasse une faute de frappe, les navigateurs pouvaient mal le prendre, en particulier IE qui applique des r√®gles d'affichage ancestrales (qu'on appelle aussi "mode quirks") en cas de doctype absent ou invalide.</p>
		<p>Bref: ce qu'il faut retenir, c'est que maintenant, le doctype s'√©crit comme ceci: <b>&lt;!doctype html></b>, et qu'il doit √™tre plac√© tout au d√©but du document HTML. Il est suivi de l'√©l√©ment racine, √† savoir <b>&lt;html></b>.</p>
		</p>Oui mais comment on fait du XHTML5 alors? La r√©ponse est simple: √ßa n'existe pas. Il n'y a qu'un HTML5, et il n'est ni "X" ni "strict" ni "transitional". et √ßa ne l'emp√™che pas de bien marcher, m√™me sur les IE pr√©historiques.</p>
		<hr>
		<p>Voici maintenant la liste tant attendue des trucs de ouf concernant <b>le doctype HTML5</b>:</p>
		<ul>
			<li>Le <b>doctype</b> est insensible √† la casse et peut contenir plusieurs espaces avant et apr√®s le mot "html". Vous pouvez donc l'√©crire <b>&lt;!DoCtYpE &nbsp; &nbsp; HtMl &nbsp; ></b> si √ßa vous chante.</li>
			<li>Le <b>doctype</b> HTML5 peut contenir <a href="http://www.w3.org/html/wg/drafts/html/master/syntax.html#the-doctype" target="_blank">d'autres informations</a>, mais aucune n'est utile quand on √©crit son HTML √† la main ou avec un IDE moderne.
			<li>
				Le <b>doctype</b> et l'√©l√©ment <b>title</b> sont les deux seuls √©l√©ments obligatoires dans un document HTML5 valide.
				<br>
				Voici le plus petit valide document HTML5:
				<pre>&lt;!doctype html>
&lt;title>&lt;/title></pre>
			</li>
			<li>
				Le doctype ne peut pas √™tre lu, ni modifi√© en JavaScript, mais on peut tout de m√™me savoir si le navigateur est en mode quirks ou en mode compatibilit√© comme ceci:
				<pre>if(document.compatMode === 'CSS1Compat'){
	// On est pas en mode quirks!
}
if(document.compatMode === 'BackCompat'){
	// On est en mode compatibilit√©!
}</pre>
				<button onclick="alert(document.compatMode!=='CSS1Compat')">Est-on en mode quirks?</button>
				<button onclick="alert(document.compatMode!=='BackCompat')">Est-on en mode compatibilit√©?</button> (si les deux sont "false", tout va bien)
			</li>
			<li>A propos du "mode compatibilit√©", qui pousse IE7, IE8, IE9 et IE10 √† afficher les pages Web avec le moteur de rendu de leur pr√©d√©c√©sseur (E6, IE7, IE8 et IE9, respectivement), de nombreuses raisons font que ce mode s'active sur IE, mais le plus souvent, c'est d√ª au fait qu'on visionne une page HTML qui se trouve sur son PC, ou sur un r√©seau local. Pour √©viter ce d√©sagr√©ment, ouvrez IE, faites "alt" pour que le menu du haut apparaisse, allez sur "outils > param√®tres d'affichage de compatibilit√©" et d√©cochez "Afficher les sites intranet dans Affichage de compatibilit√©". Faites "OK" et red√©marrez IE. C'est r√©gl√©!</li>
			<li>
				Sur IE < 9, le <b>doctype</b>, du fait qu'il commence par un <b>!</b>, est consid√©r√© comme un <b>commentaire HTML</b>. En voici la preuve:
				<pre>// R√©cup√©rons le nom du premier √©l√©ment HTML de cette page dans le DOM
var premier_element = document.getElementsByTagName("*")[0].tagName;</pre>
				<button onclick="alert(document.getElementsByTagName('*')[0].tagName)">Quel est le nom du premier √©l√©ment du DOM?</button> ("!" sur IE < 9, "HTML" ailleurs)
				<br>
				<br>
				(Les IE < 9 sont d'ailleurs les seuls navigateurs √† inclure les commentaires (sauf les commentaires conditionnels) dans <b>document.getElementsByTagName("*")</b>, comme d√©crit <a href="http://lea.verou.me/2009/02/20things-you-should-know-when-not-using-a-js-library/" target="_blank">ici</a>)
			</li>
			<li>
				Le <b>doctype</b> HTML5 fait apparaitre de vilaines scrollbars autour des <b>iframes</b> sur IE6, pour <a href="http://inmyexperience.com/2003/01/iframe-and-doctype-follies.html" target="_blank">d'obscures raisons</a>, alors que les doctypes d'avant HTML4 ne le faisaient pas. Le seul moyen de les faire dispara√Ætre est d'utiliser l'attribut (h√©las non standard) <b>scrolling=no</b> sur vos iframes... si vous voulez supporter IE6, bien s√ªr, ce que je ne vous conseille pas de faire.</li>
				D√©mo: iframe normale<br>
				<iframe style="width: 200px; height: 40px; border: 1px solid black;"></iframe>
				<br><br>iframe sans scrollbars sur IE6<br>
				<iframe style="width: 200px; height: 40px; border: 1px solid black;" scrolling=no></iframe>
			</li>
			<li>Il y a un autre bug sur IE, y compris IE10 (et peut-√™tre IE11, √† confirmer): si votre page est en mode quirks, et qu'elle contient des <b>iframe</b> qui ont un doctype valide, ces <b>iframe</b> s'afficheront tout de m√™me en mode quirks!
		</ul>
		<br>
			<br>
		A bient√¥t!
		<br>
		<b>@MaximeEuziere</b>
	</div>
</div>
  </div>
</body>
</html>